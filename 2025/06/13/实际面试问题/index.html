<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.0.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="-jCet6qPD7nML4-W6IY2HZwfSblJyWta_Jx7_AGHgIk">
  <meta name="baidu-site-verification" content="f349dc627a72ee616d62ed513574025d">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/orange/pace-theme-center-circle.css">
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"weirdozz.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.9.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.json","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>
<meta name="description" content="自我介绍Hello, thank you for giving me this opportunity to introduce myself. My name is Qingyong, and I graduated with a degree in software engineering from Shanghai University. I have a solid foundation">
<meta property="og:type" content="article">
<meta property="og:title" content="实际面试问题">
<meta property="og:url" content="https://weirdozz.github.io/2025/06/13/%E5%AE%9E%E9%99%85%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98/index.html">
<meta property="og:site_name" content="Weirdo">
<meta property="og:description" content="自我介绍Hello, thank you for giving me this opportunity to introduce myself. My name is Qingyong, and I graduated with a degree in software engineering from Shanghai University. I have a solid foundation">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.imgur.com/Kq3MQmR.png">
<meta property="og:image" content="https://i.imgur.com/u6SpVnb.png">
<meta property="og:image" content="https://i.imgur.com/fitMxKm.png">
<meta property="og:image" content="https://i.imgur.com/QoPnteT.png">
<meta property="og:image" content="https://i.imgur.com/4BSvamd.png">
<meta property="og:image" content="https://i.imgur.com/aKJAF1x.png">
<meta property="og:image" content="https://i.imgur.com/qnsp1vN.png">
<meta property="og:image" content="https://i.imgur.com/fOhyx2G.png">
<meta property="og:image" content="https://i.imgur.com/HA30G3v.png">
<meta property="og:image" content="https://i.imgur.com/2AwCdLd.png">
<meta property="og:image" content="https://i.imgur.com/Jc4YSP3.png">
<meta property="og:image" content="https://i.imgur.com/QS9CfpD.png">
<meta property="og:image" content="https://i.imgur.com/fPISLIR.png">
<meta property="og:image" content="https://i.imgur.com/tBYdxy3.png">
<meta property="og:image" content="https://i.imgur.com/I2s4rEs.png">
<meta property="og:image" content="https://i.imgur.com/IrCzWk4.png">
<meta property="og:image" content="https://i.imgur.com/CsJBkDz.png">
<meta property="og:image" content="https://i.imgur.com/jAOcq39.png">
<meta property="og:image" content="https://i.imgur.com/9EDOwXQ.png">
<meta property="og:image" content="https://i.imgur.com/UTR2nxW.png">
<meta property="og:image" content="https://i.imgur.com/LBYfz3G.png">
<meta property="og:image" content="https://i.imgur.com/VXKitfK.png">
<meta property="og:image" content="https://i.imgur.com/7AendjL.png">
<meta property="og:image" content="https://i.imgur.com/k7meG4W.png">
<meta property="og:image" content="https://i.imgur.com/WLNexiR.png">
<meta property="og:image" content="https://i.imgur.com/hQP8XF6.png">
<meta property="og:image" content="https://i.imgur.com/XEpHPkM.png">
<meta property="og:image" content="https://i.imgur.com/8LTu5x4.png">
<meta property="og:image" content="https://i.imgur.com/2JLt1BD.png">
<meta property="og:image" content="https://i.imgur.com/QSmZmmG.png">
<meta property="og:image" content="https://i.imgur.com/s9EQLmR.png">
<meta property="article:published_time" content="2025-06-13T07:53:32.000Z">
<meta property="article:modified_time" content="2025-09-26T08:34:56.691Z">
<meta property="article:author" content="Weirdo">
<meta property="article:tag" content="WeirdoBlog">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.imgur.com/Kq3MQmR.png">


<link rel="canonical" href="https://weirdozz.github.io/2025/06/13/%E5%AE%9E%E9%99%85%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://weirdozz.github.io/2025/06/13/%E5%AE%9E%E9%99%85%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98/","path":"2025/06/13/实际面试问题/","title":"实际面试问题"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>实际面试问题 | Weirdo</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Weirdo</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
        <li class="menu-item menu-item-movies"><a href="/movies/" rel="section"><i class="fa fa-film fa-fw"></i>电影</a></li>
        <li class="menu-item menu-item-books"><a href="/books/" rel="section"><i class="fa fa-book fa-fw"></i>书籍</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%87%AA%E6%88%91%E4%BB%8B%E7%BB%8D"><span class="nav-number">1.</span> <span class="nav-text">自我介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%A5%BF%E4%BA%86%E4%B9%88"><span class="nav-number">2.</span> <span class="nav-text">饿了么</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%B9%82%E7%AD%89%E6%80%A7"><span class="nav-number">2.1.</span> <span class="nav-text">接口的幂等性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#mysql%E5%B8%B8%E8%A7%81%E4%BC%98%E5%8C%96%E6%89%8B%E6%AE%B5"><span class="nav-number">2.2.</span> <span class="nav-text">mysql常见优化手段</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#explain%E7%9C%8B%E9%82%A3%E4%BA%9B%E5%AD%97%E6%AE%B5"><span class="nav-number">2.3.</span> <span class="nav-text">explain看那些字段</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JVM%E4%B8%AD%E7%B1%BB%E5%8A%A0%E8%BD%BD%E8%BF%87%E7%A8%8B"><span class="nav-number">2.4.</span> <span class="nav-text">JVM中类加载过程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8"><span class="nav-number">2.5.</span> <span class="nav-text">类加载器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#spring-bean%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-number">2.6.</span> <span class="nav-text">spring bean的生命周期</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B6%88%E8%B4%B9%E5%A4%B1%E8%B4%A5%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%EF%BC%9F%E6%AD%BB%E4%BF%A1%E9%98%9F%E5%88%97%EF%BC%9F"><span class="nav-number">2.7.</span> <span class="nav-text">消费失败如何解决？死信队列？</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%AD%BB%E4%BF%A1%E9%98%9F%E5%88%97"><span class="nav-number">2.7.1.</span> <span class="nav-text">死信队列</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Kafka-x2F-RabbitMQ"><span class="nav-number">2.8.</span> <span class="nav-text">Kafka&#x2F;RabbitMQ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Dubbo-%E7%9A%84%E8%BF%9C%E7%A8%8B%E8%B0%83%E7%94%A8%E6%B5%81%E7%A8%8B%E5%92%8C%E5%AE%B9%E9%94%99%E6%9C%BA%E5%88%B6"><span class="nav-number">2.9.</span> <span class="nav-text">Dubbo 的远程调用流程和容错机制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Springcloud%E5%92%8C%E5%AE%B9%E9%94%99%E6%9C%BA%E5%88%B6"><span class="nav-number">2.10.</span> <span class="nav-text">Springcloud和容错机制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AAQPS%E5%BE%88%E9%AB%98%E5%B9%B6%E4%B8%94%E6%95%B0%E6%8D%AE%E4%B8%80%E8%87%B4%E6%80%A7%E8%A6%81%E6%B1%82%E4%B9%9F%E5%BE%88%E9%AB%98%E7%9A%84%E6%8E%A5%E5%8F%A3"><span class="nav-number">2.11.</span> <span class="nav-text">设计一个QPS很高并且数据一致性要求也很高的接口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5"><span class="nav-number">2.12.</span> <span class="nav-text">问题排查</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A6%82%E6%9E%9C%E6%9C%891%E4%BA%BF%E4%B8%AA%E6%95%B0%E6%8D%AE%EF%BC%8C%E5%8F%AA%E6%9C%8910M%E5%86%85%E5%AD%98%EF%BC%8C%E6%80%8E%E4%B9%88%E6%8E%92%E5%BA%8F%EF%BC%9B"><span class="nav-number">2.13.</span> <span class="nav-text">如果有1亿个数据，只有10M内存，怎么排序；</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%9B%E7%A8%8B%E9%97%B4%E7%9A%84%E9%80%9A%E4%BF%A1%E6%96%B9%E6%B3%95"><span class="nav-number">2.14.</span> <span class="nav-text">进程间的通信方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#B-%E6%A0%91%E6%98%AF%E6%80%8E%E4%B9%88%E8%AE%BE%E8%AE%A1%E7%9A%84%EF%BC%9F-B-%E6%A0%91%E5%88%A0%E9%99%A4%E8%8A%82%E7%82%B9%E7%9A%84%E6%B5%81%E7%A8%8B"><span class="nav-number">2.15.</span> <span class="nav-text">B+树是怎么设计的？ B+树删除节点的流程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B7%B1%E5%88%86%E9%A1%B5%E4%BC%98%E5%8C%96"><span class="nav-number">2.16.</span> <span class="nav-text">深分页优化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%89%E5%90%91%E5%9B%BE%E9%87%8C%E6%80%8E%E4%B9%88%E6%89%BE%E5%87%BA%E6%89%80%E6%9C%89%E7%9A%84%E7%8E%AF"><span class="nav-number">2.17.</span> <span class="nav-text">有向图里怎么找出所有的环</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E5%92%8C%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B"><span class="nav-number">2.18.</span> <span class="nav-text">TCP三次握手和四次挥手</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88TCP%E8%A6%81%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B"><span class="nav-number">2.18.1.</span> <span class="nav-text">为什么TCP要三次握手</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B"><span class="nav-number">2.18.2.</span> <span class="nav-text">四次挥手</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8BJUC%E4%B8%8B%E9%9D%A2%E7%9A%84%E7%B1%BB"><span class="nav-number">2.19.</span> <span class="nav-text">并发编程JUC下面的类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E9%AB%98%E5%B9%B6%E5%8F%91%E6%80%8E%E4%B9%88%E5%81%9A%EF%BC%9F"><span class="nav-number">2.20.</span> <span class="nav-text">文件上传高并发怎么做？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Https%E9%93%BE%E6%8E%A5%E8%BF%87%E7%A8%8B"><span class="nav-number">2.21.</span> <span class="nav-text">Https链接过程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%94%A8%E6%88%B7%E6%80%81%E5%92%8C%E5%86%85%E6%A0%B8%E6%80%81"><span class="nav-number">2.22.</span> <span class="nav-text">用户态和内核态</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#kafka%E4%B8%BA%E4%BB%80%E4%B9%88%E5%BF%AB"><span class="nav-number">2.23.</span> <span class="nav-text">kafka为什么快</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%BA%E6%99%AF%E9%A2%98"><span class="nav-number">2.24.</span> <span class="nav-text">场景题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SpringAI%E5%92%8CLangchain4j"><span class="nav-number">2.25.</span> <span class="nav-text">SpringAI和Langchain4j</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%9A%82%E8%9A%81"><span class="nav-number">3.</span> <span class="nav-text">蚂蚁</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%98%BB%E5%A1%9E%E9%80%9A%E4%BF%A1%E5%92%8C%E9%9D%9E%E9%98%BB%E5%A1%9E%E9%80%9A%E4%BF%A1%E5%8C%BA%E5%88%AB"><span class="nav-number">3.1.</span> <span class="nav-text">阻塞通信和非阻塞通信区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%8B%E5%8A%A1%E6%82%AC%E6%8C%82"><span class="nav-number">3.2.</span> <span class="nav-text">事务悬挂</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#BeanFactory%E5%92%8CFactoryBean%E5%8C%BA%E5%88%AB"><span class="nav-number">3.3.</span> <span class="nav-text">BeanFactory和FactoryBean区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A6%82%E6%9E%9C%E6%83%B3%E5%9C%A8%E7%B3%BB%E7%BB%9F%E4%B8%AD%E5%B5%8C%E5%85%A5%E5%90%91%E9%87%8F%E6%A3%80%E7%B4%A2%EF%BC%8C%E8%AF%A5%E5%A6%82%E4%BD%95%E4%B8%8E%E5%8E%9F%E6%9C%89%E7%BB%93%E6%9E%84%E5%8C%96%E6%A3%80%E7%B4%A2%E7%BB%93%E5%90%88%EF%BC%9F"><span class="nav-number">3.4.</span> <span class="nav-text">如果想在系统中嵌入向量检索，该如何与原有结构化检索结合？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SpringAI%E5%B8%B8%E8%A7%81%E7%9A%84agent%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F"><span class="nav-number">3.5.</span> <span class="nav-text">SpringAI常见的agent开发模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MCP%E6%9C%89%E5%93%AA%E4%BA%9B%E9%80%9A%E8%AE%AF%E7%9A%84%E5%8D%8F%E8%AE%AE"><span class="nav-number">3.6.</span> <span class="nav-text">MCP有哪些通讯的协议</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SSE%E7%9A%84%E6%96%AD%E7%82%B9%E7%BB%AD%E4%BC%A0"><span class="nav-number">3.7.</span> <span class="nav-text">SSE的断点续传</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8mysql%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81"><span class="nav-number">3.8.</span> <span class="nav-text">怎么用mysql实现分布式锁</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RAG%E6%9C%89%E5%93%AA%E4%BA%9B%E5%8F%AF%E4%BB%A5%E4%BC%98%E5%8C%96%E7%9A%84%E7%82%B9"><span class="nav-number">3.9.</span> <span class="nav-text">RAG有哪些可以优化的点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%80%8E%E4%B9%88%E8%AE%BE%E8%AE%A1%E7%9A%84%E9%87%8D%E6%8E%92%E5%BA%8F"><span class="nav-number">3.10.</span> <span class="nav-text">怎么设计的重排序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#NDCG-DCG%EF%BC%88Normalized-Discounted-Cumulative-Gain%EF%BC%89"><span class="nav-number">3.11.</span> <span class="nav-text">NDCG DCG（Normalized Discounted Cumulative Gain）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MQ%E7%9A%84%E6%8B%89%E6%A8%A1%E5%BC%8F%E5%92%8C%E6%8E%A8%E6%A8%A1%E5%BC%8F"><span class="nav-number">3.12.</span> <span class="nav-text">MQ的拉模式和推模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%88%E4%BD%9C%E4%B8%AD%E9%81%87%E5%88%B0%E7%89%B9%E5%88%AB%E9%9A%BE%E6%90%9E%E7%9A%84%E4%BA%BA%E6%80%8E%E4%B9%88%E5%8A%9E"><span class="nav-number">3.13.</span> <span class="nav-text">合作中遇到特别难搞的人怎么办</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BA%BF%E4%B8%8A%E7%BA%BF%E4%B8%8B%E6%95%B0%E6%8D%AE%E5%90%8C%E6%AD%A5%E9%9C%80%E8%A6%81%E8%80%83%E8%99%91%E5%93%AA%E4%BA%9B%E9%97%AE%E9%A2%98"><span class="nav-number">3.14.</span> <span class="nav-text">线上线下数据同步需要考虑哪些问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#multi-agent-%E6%98%AF%E4%BB%80%E4%B9%88"><span class="nav-number">3.15.</span> <span class="nav-text">multi-agent 是什么</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#pdd"><span class="nav-number">4.</span> <span class="nav-text">pdd</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#blbl"><span class="nav-number">5.</span> <span class="nav-text">blbl</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B7%B1%E5%BA%A6%E6%99%BA%E8%80%80"><span class="nav-number">6.</span> <span class="nav-text">深度智耀</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B4%E4%B8%9A%E6%95%B0%E9%87%91"><span class="nav-number">7.</span> <span class="nav-text">兴业数金</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%B0%E5%A9%86%E7%BD%97%E6%98%8C"><span class="nav-number">8.</span> <span class="nav-text">新婆罗昌</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%8E%E7%BE%8E%E6%B5%B7%E6%B6%A6"><span class="nav-number">9.</span> <span class="nav-text">华美海润</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#EATON"><span class="nav-number">10.</span> <span class="nav-text">EATON</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Rakuten"><span class="nav-number">11.</span> <span class="nav-text">Rakuten</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#OOCL"><span class="nav-number">12.</span> <span class="nav-text">OOCL</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Weirdo"
      src="/images/weirdo.jpg">
  <p class="site-author-name" itemprop="name">Weirdo</p>
  <div class="site-description" itemprop="description">怕什么真理无穷，进一步有进一步的欢喜</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">62</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">24</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">33</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://weirdozz.github.io/2025/06/13/%E5%AE%9E%E9%99%85%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/weirdo.jpg">
      <meta itemprop="name" content="Weirdo">
      <meta itemprop="description" content="怕什么真理无穷，进一步有进一步的欢喜">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Weirdo">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          实际面试问题
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-06-13 15:53:32" itemprop="dateCreated datePublished" datetime="2025-06-13T15:53:32+08:00">2025-06-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-09-26 16:34:56" itemprop="dateModified" datetime="2025-09-26T16:34:56+08:00">2025-09-26</time>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2025/06/13/%E5%AE%9E%E9%99%85%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2025/06/13/实际面试问题/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h2 id="自我介绍"><a href="#自我介绍" class="headerlink" title="自我介绍"></a>自我介绍</h2><p>Hello, thank you for giving me this opportunity to introduce myself.</p>
<p>My name is Qingyong, and I graduated with a degree in software engineering from Shanghai University. I have a solid foundation in software development, and I am passionate about applying my skills in OOCL.</p>
<p>In my previous role at Citibank, I worked on MCA, namely Managers’ Control Assessment. My daily work involved using technologies such as Java, Spring Boot, Kafka, and MySQL to build and maintain scalable backend services. I enjoy solving practical problems and continuously improving processes.</p>
<p>I am particularly interested in OOCL because of its global presence, innovative use of technology, and commitment to operational excellence. I believe my background and enthusiasm align well with your company’s culture and vision.</p>
<p>I am excited about the possibility of contributing to your team and growing together with OOCL. Thank you for your time and consideration.</p>
<span id="more"></span>

<h2 id="饿了么"><a href="#饿了么" class="headerlink" title="饿了么"></a>饿了么</h2><h3 id="接口的幂等性"><a href="#接口的幂等性" class="headerlink" title="接口的幂等性"></a>接口的幂等性</h3><p>接口幂等性指：同一个请求调用多次，产生的结果应当一致（不会因为多次调用导致数据异常）。</p>
<ol>
<li>唯一约束：用唯一索引能保证insert操作的幂等性</li>
<li>幂等号：客户端生成一个唯一的请求id（UUID或者雪花算法），服务端在处理前先去幂等表&#x2F;Redis 检查。如果没处理过，执行逻辑并且记录；如果处理过，直接返回历史结果。</li>
<li>状态机控制：比如订单只能从 待支付 -&gt; 已支付 -&gt; 已发货，如果请求重复支付，发现状态已是 已支付，就拒绝或返回相同结果。</li>
<li>乐观锁：比较version是否有效，适合用于update场景</li>
</ol>
<ul>
<li>支付接口</li>
</ul>
<p>第三方支付回调，可能会多次通知。如果不控制幂等，就可能出现重复记账、重复发货。</p>
<ol>
<li>数据库订单表有唯一订单号（主键&#x2F;唯一索引保证不会重复插入）。</li>
<li>支付回调接口使用幂等键：</li>
<li>回调里先查订单状态：如果已是“支付成功”，直接返回 success。</li>
<li>如果未支付，再更新为“支付成功”。</li>
</ol>
<ul>
<li>下单接口</li>
</ul>
<ol>
<li>请求时前端生成一个 requestId，传给后端；</li>
<li>后端用 SETNX(requestId, 1) 写入 Redis，有效期 5 分钟；</li>
<li>如果第二次请求带相同 requestId，会被 Redis 拒绝，返回“重复请求”。</li>
</ol>
<h3 id="mysql常见优化手段"><a href="#mysql常见优化手段" class="headerlink" title="mysql常见优化手段"></a>mysql常见优化手段</h3><ol>
<li>sql本身优化</li>
</ol>
<ul>
<li>避免 SELECT *，只查必要字段。</li>
<li>WHERE 条件尽量利用索引（避免对索引列做函数、计算）。</li>
<li>少用 OR，用 UNION ALL 替代。</li>
<li>使用 EXISTS 替代 IN，特别是大集合。</li>
<li>分页优化：limit offset 大时，考虑用 覆盖索引 + 子查询 或游标。</li>
</ul>
<ol start="2">
<li>索引优化</li>
</ol>
<ul>
<li>建立合适的单列索引、联合索引。</li>
<li>遵循 最左前缀匹配原则。</li>
<li>覆盖索引（避免回表）。</li>
<li>避免索引失效：!&#x3D;、&lt;&gt;、like ‘%xxx’ 会导致失效。类型不一致时索引失效。</li>
</ul>
<h3 id="explain看那些字段"><a href="#explain看那些字段" class="headerlink" title="explain看那些字段"></a>explain看那些字段</h3><ul>
<li>Using index → 覆盖索引（好）</li>
<li>Using where → 通过 where 过滤</li>
<li>Using filesort → 有排序（需要优化，比如加索引）</li>
<li>Using temporary → 用了临时表（可能是 group by、distinct，需要优化）</li>
</ul>
<h3 id="JVM中类加载过程"><a href="#JVM中类加载过程" class="headerlink" title="JVM中类加载过程"></a>JVM中类加载过程</h3><ol>
<li>加载</li>
</ol>
<ul>
<li>通过类的全限定名（包名+类名）获取字节码（可能来自文件、网络、动态生成）。</li>
<li>把字节码读入内存，在 方法区（JDK8 以后是 元空间 Metaspace）生成 类的运行时数据结构，并在堆中生成 Class 对象作为访问入口。</li>
</ul>
<ol start="2">
<li>链接</li>
</ol>
<ul>
<li>验证：校验字节码合法性，防止恶意代码破坏 JVM。</li>
<li>准备：为类的 静态变量 分配内存并初始化默认值（不会执行赋值语句）。例如：public static int a &#x3D; 10; 在准备阶段只会赋默认值 0。</li>
<li>解析：将常量池中的 符号引用 替换为 直接引用（指向内存地址）。</li>
</ul>
<ol start="3">
<li>初始化</li>
</ol>
<ul>
<li>执行 <clinit>() 方法（由静态变量赋值语句和静态代码块组成，编译器自动生成）。</li>
<li>确保父类先于子类初始化。</li>
<li>至此类才算真正“可用”。</li>
</ul>
<h3 id="类加载器"><a href="#类加载器" class="headerlink" title="类加载器"></a>类加载器</h3><ul>
<li>每个类加载器都有一个 父加载器（不是通过继承，而是组合关系）。</li>
<li>委派机制：当类加载器要加载一个类时，先把请求交给 父加载器，直到 Bootstrap。父加载器找不到，才由自己尝试加载。</li>
</ul>
<p>好处是：不会重复加载；保证核心类库安全（比如你写一个 java.lang.String，不会被自定义覆盖）</p>
<h3 id="spring-bean的生命周期"><a href="#spring-bean的生命周期" class="headerlink" title="spring bean的生命周期"></a>spring bean的生命周期</h3><ol>
<li>实例化：为 Bean 分配内存空间；</li>
<li>设置属性：将当前类依赖的 Bean 属性，进行注入和装配；</li>
<li>初始化：</li>
</ol>
<ul>
<li>执行各种通知；</li>
<li>执行初始化的前置方法；</li>
<li>执行初始化方法；</li>
<li>执行初始化的后置方法。</li>
</ul>
<ol start="4">
<li>使用 Bean：在程序中使用 Bean 对象；</li>
<li>销毁 Bean：将 Bean 对象进行销毁操作。</li>
</ol>
<p><img src="https://i.imgur.com/Kq3MQmR.png" alt="picture 9">  </p>
<h3 id="消费失败如何解决？死信队列？"><a href="#消费失败如何解决？死信队列？" class="headerlink" title="消费失败如何解决？死信队列？"></a>消费失败如何解决？死信队列？</h3><table>
<thead>
<tr>
<th>失败原因</th>
<th>具体表现</th>
<th>解决方案</th>
</tr>
</thead>
<tbody><tr>
<td><strong>下游业务处理异常</strong></td>
<td>例如数据库写入失败、调用第三方接口超时</td>
<td>- 捕获异常，重试 N 次<br>- 使用幂等保证重复消费安全<br>- 超过重试次数 → 死信队列&#x2F;落库</td>
</tr>
<tr>
<td><strong>消息格式或数据问题</strong></td>
<td>消息字段缺失、类型错误</td>
<td>- 记录日志并丢到 DLQ<br>- 人工干预修复数据<br>- 可增加 schema 校验或 Avro&#x2F;Protobuf</td>
</tr>
<tr>
<td><strong>消费者程序异常</strong></td>
<td>消费端挂掉、线程池异常、内存溢出</td>
<td>- 自动重启消费者<br>- 监控告警<br>- 消息不会 ack，MQ 会重发</td>
</tr>
<tr>
<td><strong>消息过期或队列溢出</strong></td>
<td>消息 TTL 到期或队列满</td>
<td>- 配置死信队列处理<br>- 调整队列容量或 TTL</td>
</tr>
</tbody></table>
<h4 id="死信队列"><a href="#死信队列" class="headerlink" title="死信队列"></a>死信队列</h4><p>消息进入 DLQ 的情况</p>
<ul>
<li>消费端显式拒绝消息（nack&#x2F;reject）且不重入队。</li>
<li>消息过期（TTL 到期）。</li>
<li>队列达到最大长度（溢出）。</li>
</ul>
<p>kafka自身不带死信队列，需要手动创建</p>
<ol>
<li>为每个主题创建一个 死信主题（例如 topic-name-DLQ）。</li>
<li>消费端处理失败超过重试次数后，把消息生产到 DLQ 主题。</li>
<li>可以单独启动消费者处理 DLQ 中的消息。</li>
</ol>
<table>
<thead>
<tr>
<th>功能</th>
<th>RabbitMQ</th>
<th>Kafka</th>
</tr>
</thead>
<tbody><tr>
<td>原生 DLQ 支持</td>
<td>有，DLX + TTL + max-length 支持</td>
<td>没有，需要自定义主题 + 生产失败消息</td>
</tr>
<tr>
<td>自动重试</td>
<td>可以设置重试队列</td>
<td>依赖消费者逻辑或 Kafka Streams&#x2F;Retry topic</td>
</tr>
<tr>
<td>消费端 ack 机制</td>
<td>支持 ack&#x2F;nack</td>
<td>消费者 offset 提交控制</td>
</tr>
</tbody></table>
<h3 id="Kafka-x2F-RabbitMQ"><a href="#Kafka-x2F-RabbitMQ" class="headerlink" title="Kafka&#x2F;RabbitMQ"></a>Kafka&#x2F;RabbitMQ</h3><table>
<thead>
<tr>
<th>特性</th>
<th>RabbitMQ</th>
<th>Kafka</th>
</tr>
</thead>
<tbody><tr>
<td><strong>模型</strong></td>
<td>AMQP，Exchange + Queue</td>
<td>日志存储 + Partition（主题分区）</td>
</tr>
<tr>
<td><strong>消息存储</strong></td>
<td>消息存队列，可内存或磁盘持久化</td>
<td>持久化到磁盘，分区存储，支持海量消息</td>
</tr>
<tr>
<td><strong>顺序保证</strong></td>
<td>单队列内 FIFO 顺序</td>
<td>Partition 内顺序保证，全局顺序需单 Partition</td>
</tr>
<tr>
<td><strong>消费模式</strong></td>
<td>push&#x2F;pull（默认 push），可 ack</td>
<td>pull 拉模式，offset 可控</td>
</tr>
<tr>
<td><strong>高吞吐 &amp; 批量</strong></td>
<td>中等吞吐</td>
<td>高吞吐，批量写磁盘优化</td>
</tr>
<tr>
<td><strong>消息可靠性</strong></td>
<td>ack + DLQ + 持久化</td>
<td>offset 控制 + replication，强一致性靠 ISR</td>
</tr>
<tr>
<td><strong>使用场景</strong></td>
<td>实时性要求高、事务型、请求-响应</td>
<td>海量日志、流处理、数据管道、事件溯源</td>
</tr>
</tbody></table>
<p><img src="https://i.imgur.com/u6SpVnb.png" alt="picture 10">  </p>
<p>Kafka 的多个消费者在同一个 Topic 内共享 Partition → 消息只会被一个消费者消费。</p>
<p>RabbitMQ 多队列订阅同一个 Exchange → 每个队列都能收到消息副本。</p>
<h3 id="Dubbo-的远程调用流程和容错机制"><a href="#Dubbo-的远程调用流程和容错机制" class="headerlink" title="Dubbo 的远程调用流程和容错机制"></a>Dubbo 的远程调用流程和容错机制</h3><ol>
<li>Consumer 调用接口 → 调用本地 Proxy</li>
<li>Proxy 调用 Invoker（抽象封装调用）</li>
<li>Invoker 通过 Cluster（集群容错策略） 选择一个 Provider 节点</li>
<li>Protocol 层（如 Dubbo 协议）将请求序列化，发送到远程 Provider</li>
<li>Provider 反序列化，执行真实方法，返回结果</li>
<li>Protocol 层序列化返回结果，Consumer 反序列化 → 返回 Proxy</li>
</ol>
<table>
<thead>
<tr>
<th>策略</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Failover</strong></td>
<td>出现异常自动切换另一个 Provider（重试）</td>
</tr>
<tr>
<td><strong>Failfast</strong></td>
<td>出现异常立即失败，不重试</td>
</tr>
<tr>
<td><strong>Failsafe</strong></td>
<td>出现异常忽略，直接返回 null（适合日志收集）</td>
</tr>
<tr>
<td><strong>Failback</strong></td>
<td>出现异常记录失败，后台定时重试</td>
</tr>
<tr>
<td><strong>Forking</strong></td>
<td>并行调用多个 Provider，只要一个成功就返回</td>
</tr>
<tr>
<td><strong>Broadcast</strong></td>
<td>广播调用所有 Provider</td>
</tr>
</tbody></table>
<h3 id="Springcloud和容错机制"><a href="#Springcloud和容错机制" class="headerlink" title="Springcloud和容错机制"></a>Springcloud和容错机制</h3><ul>
<li>负载均衡：客户端选择实例（随机、轮询、权重等）</li>
<li>重试：Spring Retry 或 Feign 内置重试机制</li>
<li>降级：Hystrix &#x2F; Resilience4j</li>
<li>当 Provider 异常或超时 → 执行 fallback 方法；避免雪崩效应</li>
</ul>
<p>熔断：监控失败率，达到阈值后短时间内拒绝请求，保护系统</p>
<p>Spring Cloud 则通过 Ribbon&#x2F;Feign 做负载均衡、通过 Retry&#x2F;Resilience4j 或 Hystrix 做重试和降级，保证系统在 Provider 异常或超时时不会雪崩。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. Feign 接口</span></span><br><span class="line"><span class="meta">@FeignClient(name = &quot;user-service&quot;, fallback = UserServiceFallback.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/user/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function">User <span class="title">getUser</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 降级实现</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceFallback</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getUser</span><span class="params">(Long id)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 返回默认值或缓存数据</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> User(id, <span class="string">&quot;默认用户&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. application.yml 配置 Resilience4j 重试</span></span><br><span class="line">resilience4j.retry:</span><br><span class="line">  instances:</span><br><span class="line">    userServiceRetry:</span><br><span class="line">      max-attempts: <span class="number">3</span>     # 重试次数</span><br><span class="line">      wait-duration: 1s   # 每次重试间隔</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>springboot三级缓存</li>
<li>多系统间保证数据的一致性</li>
</ul>
<ol>
<li>分布式事务：Saga&#x2F;TCC 解决</li>
<li>本地消息列表：把「业务操作 + 发送消息」放在一个本地事务里。订单系统下单时，把订单写入数据库，同时写一条「待发送消息」到 本地消息表。事务提交后，再由异步任务扫描消息表，把消息投递到 MQ（Kafka&#x2F;RabbitMQ&#x2F;RocketMQ）。下游系统（支付&#x2F;库存）消费消息，完成处理。成功后回调更新消息表状态。</li>
<li>事务消息：订单系统发送 半消息（prepare message） 到 MQ。如果订单事务提交成功 → 确认消息（commit message），下游才能消费。如果事务失败 → 回滚消息（rollback message），下游不会消费。MQ 会定期回查事务状态，保证可靠性。</li>
</ol>
<ul>
<li>Kafka和其他消息队列</li>
</ul>
<table>
<thead>
<tr>
<th>消息队列</th>
<th>优势</th>
<th>劣势</th>
<th>典型场景</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Kafka</strong></td>
<td>高吞吐、高扩展性、持久化可靠、生态丰富（大数据&#x2F;流式计算友好）</td>
<td>延迟较高、功能偏基础、运维复杂</td>
<td>日志采集、数据流处理、实时大数据分析</td>
</tr>
<tr>
<td><strong>RabbitMQ</strong></td>
<td>协议丰富（AMQP、MQTT、STOMP）、低延迟（&lt;1ms）、灵活的消息路由（Exchange + Binding）、支持优先级</td>
<td>吞吐量一般（万级 TPS）、扩展性差于 Kafka</td>
<td>实时消息通知、任务队列、即时通讯、IoT</td>
</tr>
<tr>
<td><strong>RocketMQ</strong></td>
<td>原生支持事务消息、延时消息、消息回溯，吞吐高于 RabbitMQ，国产化好</td>
<td>社区活跃度不如 Kafka、生态弱一些</td>
<td>金融交易、订单处理、延时任务、分布式事务</td>
</tr>
<tr>
<td><strong>ActiveMQ</strong></td>
<td>历史悠久，协议丰富，功能完善</td>
<td>性能一般，社区活跃度下降</td>
<td>小型项目、遗留系统</td>
</tr>
<tr>
<td><strong>Pulsar</strong></td>
<td>多租户、存算分离、原生支持延时消息和多订阅模式，支持 Geo-Replication</td>
<td>架构复杂（需要 BookKeeper）、运维成本更高</td>
<td>云原生场景、大规模多租户消息系统</td>
</tr>
</tbody></table>
<p><img src="https://i.imgur.com/fitMxKm.png" alt="picture 8">  </p>
<h3 id="设计一个QPS很高并且数据一致性要求也很高的接口"><a href="#设计一个QPS很高并且数据一致性要求也很高的接口" class="headerlink" title="设计一个QPS很高并且数据一致性要求也很高的接口"></a>设计一个QPS很高并且数据一致性要求也很高的接口</h3><p><img src="https://i.imgur.com/QoPnteT.png" alt="picture 11">  </p>
<p><img src="https://i.imgur.com/4BSvamd.png" alt="picture 12">  </p>
<p><img src="https://i.imgur.com/aKJAF1x.png" alt="picture 13">  </p>
<p><img src="https://i.imgur.com/qnsp1vN.png" alt="picture 14">  </p>
<h3 id="问题排查"><a href="#问题排查" class="headerlink" title="问题排查"></a>问题排查</h3><p>项目中有没有遇到过 CPU 飙高、接口超时这种问题？你是怎么排查的？</p>
<p>项目中我遇到过 CPU 飙高和接口超时的问题。<br>对于 CPU 飙高，我会先用 jstack &#x2F; VisualVM 分析线程堆栈，找到高 CPU 消耗的热点方法或死循环，然后优化代码逻辑或者调整线程池。<br>对于接口超时，我会结合 APM 和日志分析调用链，定位是数据库慢查询、下游接口阻塞还是线程池耗尽，然后针对性优化：增加缓存、异步化、限流降级、优化 SQL 或索引、配置合理的超时与重试策略。<br>整个排查思路是 监控 → 线程分析 → 方法&#x2F;SQL分析 → 对症优化，保证系统稳定性和性能。</p>
<h3 id="如果有1亿个数据，只有10M内存，怎么排序；"><a href="#如果有1亿个数据，只有10M内存，怎么排序；" class="headerlink" title="如果有1亿个数据，只有10M内存，怎么排序；"></a>如果有1亿个数据，只有10M内存，怎么排序；</h3><p>步骤1： 分块排序，将数据分块，每一块单独进内存排序<br>步骤2： 多路归并，所有块的最小值构成小顶堆，每次弹出最小的，并且从最小的哪个所在文件中取出下一个数放入小顶堆</p>
<h3 id="进程间的通信方法"><a href="#进程间的通信方法" class="headerlink" title="进程间的通信方法"></a>进程间的通信方法</h3><table>
<thead>
<tr>
<th>IPC 方式</th>
<th>原理</th>
<th>优缺点</th>
<th>使用场景</th>
</tr>
</thead>
<tbody><tr>
<td><strong>管道（Pipe）&#x2F; 命名管道（FIFO）</strong></td>
<td>内核为管道分配缓冲区，一个进程写，一个进程读</td>
<td>简单、半双工（管道）、需父子&#x2F;有亲缘关系（管道）</td>
<td>父子进程通信、shell命令链</td>
</tr>
<tr>
<td><strong>消息队列（Message Queue）</strong></td>
<td>内核维护队列，进程发送&#x2F;接收消息</td>
<td>异步、安全、可指定优先级</td>
<td>Linux 系统编程、进程间异步通信</td>
</tr>
<tr>
<td><strong>信号（Signal）</strong></td>
<td>内核发送信号通知进程发生事件</td>
<td>轻量，但只能传递有限信息</td>
<td>异常&#x2F;事件通知，如 Ctrl+C、定时器</td>
</tr>
<tr>
<td><strong>共享内存（Shared Memory）</strong></td>
<td>多进程映射同一块内存区域</td>
<td>速度快，但需要同步机制（信号量&#x2F;互斥锁）</td>
<td>高性能数据交换，如多进程计算</td>
</tr>
<tr>
<td><strong>信号量（Semaphore）</strong></td>
<td>主要用于进程间同步、互斥</td>
<td>不传递数据，只控制访问</td>
<td>配合共享内存使用，保证互斥</td>
</tr>
<tr>
<td><strong>套接字（Socket）</strong></td>
<td>通过 TCP&#x2F;UDP 在同机或网络上通信</td>
<td>跨机器，支持网络通信</td>
<td>分布式服务、网络进程通信</td>
</tr>
<tr>
<td><strong>内存映射文件（mmap）</strong></td>
<td>文件映射到进程内存，多进程共享</td>
<td>可以跨进程持久化数据</td>
<td>大文件共享、内存缓存</td>
</tr>
</tbody></table>
<h3 id="B-树是怎么设计的？-B-树删除节点的流程"><a href="#B-树是怎么设计的？-B-树删除节点的流程" class="headerlink" title="B+树是怎么设计的？ B+树删除节点的流程"></a>B+树是怎么设计的？ B+树删除节点的流程</h3><ol>
<li><p>定位要删除 key 的叶子节点</p>
</li>
<li><p>删除 key</p>
</li>
<li><p>如果节点 key 数不足最小度数：</p>
</li>
</ol>
<ul>
<li>优先向左右兄弟节点借 key</li>
<li>如果无法借 → 合并兄弟节点，并删除父节点对应 key</li>
</ul>
<ol start="4">
<li>父节点递归处理不足情况</li>
<li>根节点特殊处理，必要时高度减 1</li>
</ol>
<h3 id="深分页优化"><a href="#深分页优化" class="headerlink" title="深分页优化"></a>深分页优化</h3><ol>
<li>基于索引的“延迟关联”,利用索引先查主键，再回表取数据，避免大范围扫描。</li>
<li>基于游标 &#x2F; Keyset Pagination（推荐 ✅）</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-- 假设上一页的最后一个 create_time = <span class="string">&#x27;2025-09-01 10:00:00&#x27;</span></span><br><span class="line">SELECT * FROM orders</span><br><span class="line">WHERE status = <span class="string">&#x27;PAID&#x27;</span> </span><br><span class="line">  AND create_time &gt; <span class="string">&#x27;2025-09-01 10:00:00&#x27;</span></span><br><span class="line">ORDER BY create_time</span><br><span class="line">LIMIT <span class="number">10</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>限制最大页数</li>
</ol>
<h3 id="有向图里怎么找出所有的环"><a href="#有向图里怎么找出所有的环" class="headerlink" title="有向图里怎么找出所有的环"></a>有向图里怎么找出所有的环</h3><p>拓扑排序确认是否有环；dfs遍历记录环</p>
<h3 id="TCP三次握手和四次挥手"><a href="#TCP三次握手和四次挥手" class="headerlink" title="TCP三次握手和四次挥手"></a>TCP三次握手和四次挥手</h3><h4 id="为什么TCP要三次握手"><a href="#为什么TCP要三次握手" class="headerlink" title="为什么TCP要三次握手"></a>为什么TCP要三次握手</h4><p>TCP 是 全双工 的，双方都要确认彼此的 发送能力 和 接收能力 没问题，才能正常通信。</p>
<ol>
<li>客户端发送给服务端，告诉他我能发</li>
<li>服务端收到后，告诉客户端我能收也能发</li>
<li>客户端收到后，告诉服务端我能收</li>
</ol>
<h4 id="四次挥手"><a href="#四次挥手" class="headerlink" title="四次挥手"></a>四次挥手</h4><p>主动方发 FIN → 表示：我不发了（但还能收）。</p>
<p>被动方回 ACK → 我知道你不发了，但我可能还要发。</p>
<p>被动方发 FIN → 我也不发了。</p>
<p>主动方回 ACK → 好的，连接完全关闭。</p>
<p><img src="https://i.imgur.com/fOhyx2G.png" alt="picture 15">  </p>
<h3 id="并发编程JUC下面的类"><a href="#并发编程JUC下面的类" class="headerlink" title="并发编程JUC下面的类"></a>并发编程JUC下面的类</h3><p><img src="https://i.imgur.com/HA30G3v.png" alt="picture 16">  </p>
<p><img src="https://i.imgur.com/2AwCdLd.png" alt="picture 17">  </p>
<p><img src="https://i.imgur.com/Jc4YSP3.png" alt="picture 18">  </p>
<p><img src="https://i.imgur.com/QS9CfpD.png" alt="picture 19">  </p>
<p><img src="https://i.imgur.com/fPISLIR.png" alt="picture 20">  </p>
<h3 id="文件上传高并发怎么做？"><a href="#文件上传高并发怎么做？" class="headerlink" title="文件上传高并发怎么做？"></a>文件上传高并发怎么做？</h3><p>我们采用了 分片上传 + 秒传 + 断点续传 的方案。<br>前端负责分片并行上传，服务端通过 Redis 记录分片上传进度，避免重复上传。<br>上传的分片直接写入 对象存储（比如 MinIO &#x2F; OSS），应用层只做元数据校验和任务调度，减轻 I&#x2F;O 压力。<br>当所有分片完成后，通过 MQ 触发异步合并，最终更新数据库记录。<br>在高并发场景下，我们做了 限流、负载均衡、Redis 缓存 来提升性能，并通过 断点续传 避免失败重传浪费带宽。</p>
<h3 id="Https链接过程"><a href="#Https链接过程" class="headerlink" title="Https链接过程"></a>Https链接过程</h3><p>HTTPS 本质上就是 HTTP + TLS&#x2F;SSL，所以它的连接过程其实是 TCP 三次握手 + TLS 握手 + HTTP 请求响应</p>
<p>TLS流程：</p>
<p><img src="https://i.imgur.com/tBYdxy3.png" alt="picture 21">  </p>
<p><img src="https://i.imgur.com/I2s4rEs.png" alt="picture 22">  </p>
<h3 id="用户态和内核态"><a href="#用户态和内核态" class="headerlink" title="用户态和内核态"></a>用户态和内核态</h3><table>
<thead>
<tr>
<th>特性</th>
<th>用户态</th>
<th>内核态</th>
</tr>
</thead>
<tbody><tr>
<td>权限</td>
<td>受限</td>
<td>完全权限</td>
</tr>
<tr>
<td>能否直接访问硬件</td>
<td>❌ 不行</td>
<td>✅ 可以</td>
</tr>
<tr>
<td>能否执行特权指令</td>
<td>❌ 不行</td>
<td>✅ 可以（如修改页表、关中断）</td>
</tr>
<tr>
<td>程序示例</td>
<td>应用程序（浏览器、数据库、Java 进程）</td>
<td>操作系统内核（Linux Kernel, Windows NT Kernel）</td>
</tr>
<tr>
<td>出错影响</td>
<td>程序崩溃，不影响系统</td>
<td>内核崩溃 → 系统蓝屏 &#x2F; Kernel Panic</td>
</tr>
<tr>
<td>运行空间</td>
<td>用户空间（User Space）</td>
<td>内核空间（Kernel Space）</td>
</tr>
</tbody></table>
<h3 id="kafka为什么快"><a href="#kafka为什么快" class="headerlink" title="kafka为什么快"></a>kafka为什么快</h3><p>Kafka 快的原因：顺序写磁盘、批量处理、页缓存、分区并行，以及利用 零拷贝（sendfile） 避免用户态&#x2F;内核态之间的多次拷贝。<br>零拷贝的本质：数据不再经过用户态缓冲区，而是直接在 内核缓冲区和网卡之间传输，减少拷贝次数和上下文切换。</p>
<h3 id="场景题"><a href="#场景题" class="headerlink" title="场景题"></a>场景题</h3><p><img src="https://i.imgur.com/IrCzWk4.png" alt="picture 23">  </p>
<p><img src="https://i.imgur.com/CsJBkDz.png" alt="picture 24">  </p>
<p><img src="https://i.imgur.com/jAOcq39.png" alt="picture 25">  </p>
<p><img src="https://i.imgur.com/9EDOwXQ.png" alt="picture 26">  </p>
<p><img src="https://i.imgur.com/UTR2nxW.png" alt="picture 27">  </p>
<p><img src="https://i.imgur.com/LBYfz3G.png" alt="picture 28">  </p>
<p><img src="https://i.imgur.com/VXKitfK.png" alt="picture 29">  </p>
<h3 id="SpringAI和Langchain4j"><a href="#SpringAI和Langchain4j" class="headerlink" title="SpringAI和Langchain4j"></a>SpringAI和Langchain4j</h3><table>
<thead>
<tr>
<th>特性</th>
<th>Spring AI</th>
<th>LangChain4j</th>
</tr>
</thead>
<tbody><tr>
<td><strong>定位</strong></td>
<td>Spring 官方生态，强调企业集成</td>
<td>LangChain Java 版，强调实验性和灵活性</td>
</tr>
<tr>
<td><strong>模型支持</strong></td>
<td>OpenAI, Azure OpenAI, HuggingFace, Ollama, Cohere, Bedrock 等</td>
<td>OpenAI, Azure, HuggingFace, Ollama, 本地 LLM 等</td>
</tr>
<tr>
<td><strong>RAG</strong></td>
<td>内置向量存储（Redis, Milvus, Pinecone, PGVector, Weaviate）支持</td>
<td>有 Memory + Retriever，但集成度比 Spring AI 稍差</td>
</tr>
<tr>
<td><strong>工具调用（Function Calling）</strong></td>
<td>支持，但偏配置化</td>
<td>支持 @Tool 注解，直接暴露 Java 方法，更灵活</td>
</tr>
<tr>
<td><strong>Agent</strong></td>
<td>目前还比较基础</td>
<td>支持多种 Agent（ReAct、ChatAgent），适合构建复杂 AI 工作流</td>
</tr>
<tr>
<td><strong>生态</strong></td>
<td>原生整合 Spring Boot、Spring Data、Spring Cloud</td>
<td>纯 LangChain 思想，和 Spring 没强绑定</td>
</tr>
<tr>
<td><strong>学习曲线</strong></td>
<td>对 Spring 熟悉的人 → 很快上手</td>
<td>对 LLM 概念熟悉的人 → 更快上手</td>
</tr>
<tr>
<td><strong>生产环境稳定性</strong></td>
<td>高（Spring 官方支持）</td>
<td>偏社区驱动，更新较</td>
</tr>
</tbody></table>
<h2 id="蚂蚁"><a href="#蚂蚁" class="headerlink" title="蚂蚁"></a>蚂蚁</h2><h3 id="阻塞通信和非阻塞通信区别"><a href="#阻塞通信和非阻塞通信区别" class="headerlink" title="阻塞通信和非阻塞通信区别"></a>阻塞通信和非阻塞通信区别</h3><ol>
<li>阻塞通信</li>
</ol>
<p>用户线程调用 read(fd, buf, size)。</p>
<p>内核检查 socket&#x2F;文件缓冲区：</p>
<p>如果有数据：拷贝到用户缓冲区，立即返回。</p>
<p>如果没数据：挂起线程，直到数据到达或超时，再唤醒继续执行。</p>
<ol start="2">
<li>非阻塞通信</li>
</ol>
<p>用户线程调用 read(fd, buf, size)。</p>
<p>内核检查缓冲区：</p>
<p>如果有数据：立即返回数据。</p>
<p>如果没数据：立即返回错误码 EAGAIN&#x2F;EWOULDBLOCK，线程不会被挂起。</p>
<p>用户需要自己决定：是 轮询 还是 注册事件回调（select&#x2F;poll&#x2F;epoll&#x2F;kqueue）。</p>
<h3 id="事务悬挂"><a href="#事务悬挂" class="headerlink" title="事务悬挂"></a>事务悬挂</h3><p>一个事务因为某种原因没有正常提交或回滚，一直处于 未完成（open&#x2F;active）状态，导致资源被占用或数据不一致的情况。</p>
<p>常见触发场景：</p>
<ul>
<li>应用异常</li>
</ul>
<p>程序抛异常但没有正确处理事务（忘记回滚）。</p>
<ul>
<li>分布式事务问题</li>
</ul>
<p>使用分布式事务框架（如 Seata、Atomikos）时，某个分支事务执行失败，但全局事务还没最终回滚&#x2F;提交。</p>
<ul>
<li>网络或连接中断</li>
</ul>
<p>客户端断开连接，数据库仍然认为事务处于活跃状态。</p>
<ul>
<li>死锁或长事务</li>
</ul>
<p>事务一直等待锁，但超时没有被处理 → 事务挂起。</p>
<h3 id="BeanFactory和FactoryBean区别"><a href="#BeanFactory和FactoryBean区别" class="headerlink" title="BeanFactory和FactoryBean区别"></a>BeanFactory和FactoryBean区别</h3><table>
<thead>
<tr>
<th>特性</th>
<th>BeanFactory</th>
<th>FactoryBean</th>
</tr>
</thead>
<tbody><tr>
<td>类型</td>
<td>容器接口</td>
<td>用户实现的接口</td>
</tr>
<tr>
<td>作用</td>
<td>管理 Bean 生命周期、依赖注入</td>
<td>自定义 Bean 实例化逻辑</td>
</tr>
<tr>
<td>获取对象</td>
<td><code>getBean(&quot;id&quot;)</code></td>
<td><code>getBean(&quot;id&quot;)</code> 返回 <code>getObject()</code> 的结果</td>
</tr>
<tr>
<td>单例&#x2F;多例</td>
<td>由容器管理</td>
<td>由 <code>isSingleton()</code> 决定</td>
</tr>
<tr>
<td>是否容器本身</td>
<td>是</td>
<td>否，FactoryBean 是容器托管的普通 Bean</td>
</tr>
</tbody></table>
<h3 id="如果想在系统中嵌入向量检索，该如何与原有结构化检索结合？"><a href="#如果想在系统中嵌入向量检索，该如何与原有结构化检索结合？" class="headerlink" title="如果想在系统中嵌入向量检索，该如何与原有结构化检索结合？"></a>如果想在系统中嵌入向量检索，该如何与原有结构化检索结合？</h3><ul>
<li>方案 A：级联检索（先结构化 → 再向量），先用结构化条件过滤候选集（减少数据量）。对候选集做向量检索。</li>
<li>方案 B: 混合检索（Hybrid Search）,同时执行 向量检索 和 关键词检索，得到两组结果。再做 加权合并&#x2F;重排序。</li>
<li>方案 C: 并行分层检索（Multi-Stage），第一层：用向量检索找到大致相关的语料。第二层：在结果里用结构化过滤&#x2F;精确匹配。</li>
</ul>
<h3 id="SpringAI常见的agent开发模式"><a href="#SpringAI常见的agent开发模式" class="headerlink" title="SpringAI常见的agent开发模式"></a>SpringAI常见的agent开发模式</h3><p><img src="https://i.imgur.com/7AendjL.png" alt="picture 30">  </p>
<p><img src="https://i.imgur.com/k7meG4W.png" alt="picture 31">  </p>
<h3 id="MCP有哪些通讯的协议"><a href="#MCP有哪些通讯的协议" class="headerlink" title="MCP有哪些通讯的协议"></a>MCP有哪些通讯的协议</h3><ul>
<li>JSON-RPC over stdio：最常见的模式（尤其是本地 MCP Server）。客户端（比如 Claude Desktop、VS Code 插件）和 MCP Server 通过标准输入&#x2F;输出管道通信。消息格式遵循 JSON-RPC 2.0。</li>
<li>JSON-RPC over WebSocket：适用于远程 MCP Server，支持双向实时通讯。允许客户端和服务端互相推送消息，不局限于请求-响应。常用于需要长连接的场景（比如持续流式数据）。</li>
<li>JSON-RPC over HTTP (实验性&#x2F;少见)：理论上可行，但目前官方实现中更推荐 WebSocket 或 stdio。HTTP 模式比较适合短连接调用工具，不太适合事件推送。</li>
</ul>
<h3 id="SSE的断点续传"><a href="#SSE的断点续传" class="headerlink" title="SSE的断点续传"></a>SSE的断点续传</h3><ol>
<li>服务器端发送带有id的事件</li>
<li>客户端自动记录最近的id</li>
<li>客户端重连时携带last_event_id头</li>
<li>服务器根据last_event_id补发</li>
</ol>
<h3 id="怎么用mysql实现分布式锁"><a href="#怎么用mysql实现分布式锁" class="headerlink" title="怎么用mysql实现分布式锁"></a>怎么用mysql实现分布式锁</h3><ul>
<li>主键约束：insert的时候主键存在就无法insert</li>
<li>mysql自带的get_lock&#x2F;release_lock()函数</li>
</ul>
<h3 id="RAG有哪些可以优化的点"><a href="#RAG有哪些可以优化的点" class="headerlink" title="RAG有哪些可以优化的点"></a>RAG有哪些可以优化的点</h3><ol>
<li>向量化表示优化</li>
</ol>
<ul>
<li><p>选择更适合语义的 embedding 模型（OpenAI Ada&#x2F;Curie、LLaMA&#x2F;Claude embedding 等）。</p>
</li>
<li><p>对长文本进行切片（chunking）策略优化。</p>
</li>
<li><p>对关键字段加权（title、摘要权重高于正文）。</p>
</li>
</ul>
<ol start="2">
<li>索引优化</li>
</ol>
<ul>
<li><p>使用高性能向量数据库（Milvus、Pinecone、Weaviate）。</p>
</li>
<li><p>调整向量索引参数（HNSW &#x2F; IVF &#x2F; PQ）平衡召回率与性能。</p>
</li>
</ul>
<ol start="3">
<li>检索策略</li>
</ol>
<ul>
<li><p>Top-K 参数调整：取多少条文档进入 LLM。</p>
</li>
<li><p>检索融合：向量检索 + BM25 混合检索。</p>
</li>
<li><p>动态检索：根据问题类型选择不同知识库或检索模型。</p>
</li>
</ul>
<h3 id="怎么设计的重排序"><a href="#怎么设计的重排序" class="headerlink" title="怎么设计的重排序"></a>怎么设计的重排序</h3><ul>
<li>基于向量匹配的双塔模型：用SentenceTransformer 将 query + document 拼接后输入模型，直接输出相关性分数</li>
<li>基于LLM的评分：将query和文档送入LLM，让他输出相似度得分</li>
</ul>
<h3 id="NDCG-DCG（Normalized-Discounted-Cumulative-Gain）"><a href="#NDCG-DCG（Normalized-Discounted-Cumulative-Gain）" class="headerlink" title="NDCG DCG（Normalized Discounted Cumulative Gain）"></a>NDCG DCG（Normalized Discounted Cumulative Gain）</h3><p>DCG 衡量 检索结果的相关性和位置的重要性：排在前面的相关文档权重更高</p>
<h3 id="MQ的拉模式和推模式"><a href="#MQ的拉模式和推模式" class="headerlink" title="MQ的拉模式和推模式"></a>MQ的拉模式和推模式</h3><table>
<thead>
<tr>
<th>场景</th>
<th>推荐模式</th>
</tr>
</thead>
<tbody><tr>
<td>实时通知 &#x2F; 即时消息</td>
<td>推模式（低延迟）</td>
</tr>
<tr>
<td>批量任务 &#x2F; 异步处理 &#x2F; 数据同步</td>
<td>拉模式（可控消费）</td>
</tr>
<tr>
<td>流量波动大时</td>
<td>拉模式（限流、批量）</td>
</tr>
<tr>
<td>消费者数量少且固定</td>
<td>推模式（简单）</td>
</tr>
</tbody></table>
<h3 id="合作中遇到特别难搞的人怎么办"><a href="#合作中遇到特别难搞的人怎么办" class="headerlink" title="合作中遇到特别难搞的人怎么办"></a>合作中遇到特别难搞的人怎么办</h3><h3 id="线上线下数据同步需要考虑哪些问题"><a href="#线上线下数据同步需要考虑哪些问题" class="headerlink" title="线上线下数据同步需要考虑哪些问题"></a>线上线下数据同步需要考虑哪些问题</h3><h3 id="multi-agent-是什么"><a href="#multi-agent-是什么" class="headerlink" title="multi-agent 是什么"></a>multi-agent 是什么</h3><ul>
<li>prompt设计</li>
<li>Rag设计</li>
<li>MCP怎么做</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.mcp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/mcp&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">McpController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1. 列出所有工具</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/tools&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">listTools</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Map&lt;String, Object&gt; response = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        List&lt;Map&lt;String, Object&gt;&gt; tools = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// SearchTool</span></span><br><span class="line">        Map&lt;String, Object&gt; searchTool = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        searchTool.put(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;SearchTool&quot;</span>);</span><br><span class="line">        searchTool.put(<span class="string">&quot;description&quot;</span>, <span class="string">&quot;Search the web for information&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Map&lt;String, Object&gt; searchParams = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        searchParams.put(<span class="string">&quot;type&quot;</span>, <span class="string">&quot;object&quot;</span>);</span><br><span class="line">        searchParams.put(<span class="string">&quot;properties&quot;</span>, Map.of(</span><br><span class="line">                <span class="string">&quot;query&quot;</span>, Map.of(<span class="string">&quot;type&quot;</span>, <span class="string">&quot;string&quot;</span>, <span class="string">&quot;description&quot;</span>, <span class="string">&quot;The search query&quot;</span>)</span><br><span class="line">        ));</span><br><span class="line">        searchParams.put(<span class="string">&quot;required&quot;</span>, List.of(<span class="string">&quot;query&quot;</span>));</span><br><span class="line"></span><br><span class="line">        searchTool.put(<span class="string">&quot;parameters&quot;</span>, searchParams);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// WeatherTool</span></span><br><span class="line">        Map&lt;String, Object&gt; weatherTool = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        weatherTool.put(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;WeatherTool&quot;</span>);</span><br><span class="line">        weatherTool.put(<span class="string">&quot;description&quot;</span>, <span class="string">&quot;Get the current weather of a city&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Map&lt;String, Object&gt; weatherParams = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        weatherParams.put(<span class="string">&quot;type&quot;</span>, <span class="string">&quot;object&quot;</span>);</span><br><span class="line">        weatherParams.put(<span class="string">&quot;properties&quot;</span>, Map.of(</span><br><span class="line">                <span class="string">&quot;city&quot;</span>, Map.of(<span class="string">&quot;type&quot;</span>, <span class="string">&quot;string&quot;</span>, <span class="string">&quot;description&quot;</span>, <span class="string">&quot;The city name&quot;</span>)</span><br><span class="line">        ));</span><br><span class="line">        weatherParams.put(<span class="string">&quot;required&quot;</span>, List.of(<span class="string">&quot;city&quot;</span>));</span><br><span class="line"></span><br><span class="line">        weatherTool.put(<span class="string">&quot;parameters&quot;</span>, weatherParams);</span><br><span class="line"></span><br><span class="line">        tools.add(searchTool);</span><br><span class="line">        tools.add(weatherTool);</span><br><span class="line"></span><br><span class="line">        response.put(<span class="string">&quot;tools&quot;</span>, tools);</span><br><span class="line">        <span class="keyword">return</span> response;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. 调用具体工具</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/tools/&#123;toolName&#125;/call&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">callTool</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">            <span class="meta">@PathVariable</span> String toolName,</span></span></span><br><span class="line"><span class="params"><span class="function">            <span class="meta">@RequestBody</span> Map&lt;String, Object&gt; params</span></span></span><br><span class="line"><span class="params"><span class="function">    )</span> </span>&#123;</span><br><span class="line">        Map&lt;String, Object&gt; result = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;SearchTool&quot;</span>.equalsIgnoreCase(toolName)) &#123;</span><br><span class="line">            String query = (String) params.get(<span class="string">&quot;query&quot;</span>);</span><br><span class="line">            result.put(<span class="string">&quot;result&quot;</span>, <span class="string">&quot;Simulated search results for: &quot;</span> + query);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;WeatherTool&quot;</span>.equalsIgnoreCase(toolName)) &#123;</span><br><span class="line">            String city = (String) params.get(<span class="string">&quot;city&quot;</span>);</span><br><span class="line">            result.put(<span class="string">&quot;result&quot;</span>, <span class="string">&quot;The weather in &quot;</span> + city + <span class="string">&quot; is sunny, 25°C&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            result.put(<span class="string">&quot;error&quot;</span>, <span class="string">&quot;Unknown tool: &quot;</span> + toolName);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>agent设计</li>
</ul>
<p>Langchain4j 目前不支持高层次的agent的定义，只能手动通过AIService,ContentRetriever,MemoryProvider来进行构建 本质上也是一个AiService</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> dev.langchain4j.example;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> dev.langchain4j.service.MemoryId;</span><br><span class="line"><span class="keyword">import</span> dev.langchain4j.service.Result;</span><br><span class="line"><span class="keyword">import</span> dev.langchain4j.service.SystemMessage;</span><br><span class="line"><span class="keyword">import</span> dev.langchain4j.service.UserMessage;</span><br><span class="line"><span class="keyword">import</span> dev.langchain4j.service.spring.AiService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@AiService</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">CustomerSupportAgent</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SystemMessage(&quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">            Your name is Roger, you are a customer support agent of a car rental company named &#x27;Miles of Smiles&#x27;.</span></span><br><span class="line"><span class="meta">            You are friendly, polite and concise.</span></span><br><span class="line"><span class="meta">            </span></span><br><span class="line"><span class="meta">            Rules that you must obey:</span></span><br><span class="line"><span class="meta">            </span></span><br><span class="line"><span class="meta">            1. Before getting the booking details or canceling the booking,</span></span><br><span class="line"><span class="meta">            you must make sure you know the customer&#x27;s first name, last name, and booking number.</span></span><br><span class="line"><span class="meta">            </span></span><br><span class="line"><span class="meta">            2. When asked to cancel the booking, first make sure it exists, then ask for an explicit confirmation.</span></span><br><span class="line"><span class="meta">            After cancelling the booking, always say &quot;We hope to welcome you back again soon&quot;.</span></span><br><span class="line"><span class="meta">            </span></span><br><span class="line"><span class="meta">            3. You should answer only questions related to the business of Miles of Smiles.</span></span><br><span class="line"><span class="meta">            When asked about something not relevant to the company business,</span></span><br><span class="line"><span class="meta">            apologize and say that you cannot help with that.</span></span><br><span class="line"><span class="meta">            </span></span><br><span class="line"><span class="meta">            Today is &#123;&#123;current_date&#125;&#125;.</span></span><br><span class="line"><span class="meta">            &quot;&quot;&quot;)</span></span><br><span class="line">    <span class="function">Result&lt;String&gt; <span class="title">answer</span><span class="params">(<span class="meta">@MemoryId</span> String memoryId, <span class="meta">@UserMessage</span> String userMessage)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>分布式事务的CAP</li>
</ul>
<ol>
<li><p>C：一致性 → 所有节点看到的数据必须一致（强一致性）。</p>
</li>
<li><p>A：可用性 → 系统一直对外可服务（不会因为部分节点故障而拒绝请求）。</p>
</li>
<li><p>P：分区容错性 → 系统必须容忍网络分区（节点间通讯可能失败）。</p>
</li>
</ol>
<p><img src="https://i.imgur.com/WLNexiR.png" alt="picture 5">  </p>
<ul>
<li>设计三个线程，交易生成线程，风险控制线程，交易执行线程，保证订单有序经过这三个线程处理，还要保证高并发场景下的处理，还要优雅关闭，还要能够保证发生异常时不影响其他线程</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.*;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Order</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> String id;</span><br><span class="line">    Order(String id) &#123; <span class="keyword">this</span>.id = id; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TradePipeline</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> BlockingQueue&lt;Order&gt; queue1 = <span class="keyword">new</span> LinkedBlockingQueue&lt;&gt;();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> BlockingQueue&lt;Order&gt; queue2 = <span class="keyword">new</span> LinkedBlockingQueue&lt;&gt;();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ExecutorService producerPool = Executors.newSingleThreadExecutor();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ExecutorService riskPool = Executors.newFixedThreadPool(<span class="number">4</span>);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ExecutorService execPool = Executors.newFixedThreadPool(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 交易生成线程</span></span><br><span class="line">        producerPool.submit(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">while</span> (!Thread.currentThread().isInterrupted()) &#123;</span><br><span class="line">                    Order order = <span class="keyword">new</span> Order(<span class="string">&quot;Order-&quot;</span> + i++);</span><br><span class="line">                    queue1.put(order); <span class="comment">// 放入队列1</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                Thread.currentThread().interrupt();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 风险控制线程</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">4</span>; j++) &#123;</span><br><span class="line">            riskPool.submit(() -&gt; &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">                        Order order = queue1.take();</span><br><span class="line">                        <span class="comment">// POISON PILL 退出标记</span></span><br><span class="line">                        <span class="keyword">if</span> (order.id.equals(<span class="string">&quot;POISON&quot;</span>)) <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            <span class="comment">// 风控逻辑</span></span><br><span class="line">                            System.out.println(<span class="string">&quot;Risk check: &quot;</span> + order.id);</span><br><span class="line">                            queue2.put(order);</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                            System.err.println(<span class="string">&quot;Risk failed: &quot;</span> + order.id);</span><br><span class="line">                            <span class="comment">// DLQ/日志记录</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException ignored) &#123;&#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 执行线程</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">4</span>; j++) &#123;</span><br><span class="line">            execPool.submit(() -&gt; &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">                        Order order = queue2.take();</span><br><span class="line">                        <span class="keyword">if</span> (order.id.equals(<span class="string">&quot;POISON&quot;</span>)) <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            <span class="comment">// 执行逻辑</span></span><br><span class="line">                            System.out.println(<span class="string">&quot;Execute: &quot;</span> + order.id);</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                            System.err.println(<span class="string">&quot;Exec failed: &quot;</span> + order.id);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException ignored) &#123;&#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">shutdown</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        <span class="comment">// 停止生成任务</span></span><br><span class="line">        producerPool.shutdownNow();</span><br><span class="line">        <span class="comment">// 给风控和执行队列发 POISON PILL</span></span><br><span class="line">        queue1.offer(<span class="keyword">new</span> Order(<span class="string">&quot;POISON&quot;</span>));</span><br><span class="line">        queue2.offer(<span class="keyword">new</span> Order(<span class="string">&quot;POISON&quot;</span>));</span><br><span class="line">        riskPool.shutdown();</span><br><span class="line">        execPool.shutdown();</span><br><span class="line">        <span class="comment">// 等待线程池关闭</span></span><br><span class="line">        riskPool.awaitTermination(<span class="number">10</span>, TimeUnit.SECONDS);</span><br><span class="line">        execPool.awaitTermination(<span class="number">10</span>, TimeUnit.SECONDS);</span><br><span class="line">        System.out.println(<span class="string">&quot;Pipeline shutdown gracefully.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        TradePipeline pipeline = <span class="keyword">new</span> TradePipeline();</span><br><span class="line">        pipeline.start();</span><br><span class="line">        Thread.sleep(<span class="number">2000</span>); <span class="comment">// 模拟运行一段时间</span></span><br><span class="line">        pipeline.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="pdd"><a href="#pdd" class="headerlink" title="pdd"></a>pdd</h2><ul>
<li>TCP&#x2F;UDP区别</li>
</ul>
<table>
<thead>
<tr>
<th>特性</th>
<th>TCP</th>
<th>UDP</th>
</tr>
</thead>
<tbody><tr>
<td>连接方式</td>
<td>面向连接</td>
<td>无连接</td>
</tr>
<tr>
<td>可靠性</td>
<td>可靠（顺序到达）</td>
<td>不可靠（可能丢包、乱序）</td>
</tr>
<tr>
<td>流量控制</td>
<td>有</td>
<td>无</td>
</tr>
<tr>
<td>拥塞控制</td>
<td>有</td>
<td>无</td>
</tr>
<tr>
<td>传输单位</td>
<td>字节流</td>
<td>数据报</td>
</tr>
<tr>
<td>延迟</td>
<td>较高</td>
<td>较低</td>
</tr>
<tr>
<td>适用场景</td>
<td>文件传输、Web 浏览</td>
<td>实时音视频、游戏、广播</td>
</tr>
</tbody></table>
<ul>
<li>堆里面放什么</li>
</ul>
<p>类对象，数组，对象头，常量池应用</p>
<table>
<thead>
<tr>
<th>特性</th>
<th>堆（Heap）</th>
<th>栈（Stack）</th>
</tr>
</thead>
<tbody><tr>
<td>存储内容</td>
<td>对象实例、数组、对象头</td>
<td>方法调用的局部变量、参数、返回地址</td>
</tr>
<tr>
<td>生命周期</td>
<td>由 GC 管理</td>
<td>方法执行结束自动回收</td>
</tr>
<tr>
<td>大小</td>
<td>较大</td>
<td>较小</td>
</tr>
<tr>
<td>访问速度</td>
<td>较慢</td>
<td>快（CPU 可直接访问）</td>
</tr>
</tbody></table>
<ul>
<li>zset数据结构</li>
</ul>
<p>跳表</p>
<ul>
<li>什么情况下分布式锁会失效</li>
</ul>
<table>
<thead>
<tr>
<th>失效场景</th>
<th>原因&#x2F;机制</th>
<th>解决方案</th>
</tr>
</thead>
<tbody><tr>
<td>锁过期</td>
<td>业务执行时间 &gt; TTL</td>
<td>自动续期，延长 TTL</td>
</tr>
<tr>
<td>锁释放异常</td>
<td>线程宕机、异常提前释放</td>
<td>使用唯一标识解锁，原子释放</td>
</tr>
<tr>
<td>网络延迟&#x2F;分区</td>
<td>网络不稳定，脑裂或延迟导致多节点持锁</td>
<td>使用 Redlock 或 Zookeeper&#x2F;Etcd</td>
</tr>
<tr>
<td>锁实现不原子</td>
<td>自己实现 SETNX + EXPIRE 不原子</td>
<td>使用原子命令，可靠库</td>
</tr>
<tr>
<td>线程错误持锁&#x2F;误操作</td>
<td>业务逻辑错误导致 unlock 错误</td>
<td>解锁前检查 owner UUID</td>
</tr>
</tbody></table>
<ul>
<li>为什么左小右大的树复杂度是logn</li>
</ul>
<p><img src="https://i.imgur.com/hQP8XF6.png" alt="picture 4">  </p>
<ul>
<li>Http&#x2F;Https&#x2F;TCP 区别</li>
</ul>
<p><img src="https://i.imgur.com/XEpHPkM.png" alt="picture 3">  </p>
<ul>
<li>联合索引底层数据结构</li>
</ul>
<p><img src="https://i.imgur.com/8LTu5x4.png" alt="B+树 1">  </p>
<ul>
<li>类加载</li>
</ul>
<p><img src="https://i.imgur.com/2JLt1BD.png" alt="picture 6">  </p>
<ul>
<li>类卸载</li>
</ul>
<p><img src="https://i.imgur.com/QSmZmmG.png" alt="picture 7">  </p>
<ul>
<li>redis各种数据类型的数据结构</li>
</ul>
<table>
<thead>
<tr>
<th>Redis 类型</th>
<th>典型用途</th>
<th>底层数据结构</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><strong>String</strong></td>
<td>缓存值、计数器、分布式锁</td>
<td>SDS（简单动态字符串）、int</td>
<td>小整数用 int，其他用 SDS</td>
</tr>
<tr>
<td><strong>List</strong></td>
<td>消息队列、任务流</td>
<td>quicklist（双向链表+压缩列表）</td>
<td>Redis 3.2 之后统一用 quicklist</td>
</tr>
<tr>
<td><strong>Hash</strong></td>
<td>存对象（用户信息、配置）</td>
<td>listpack（小数据）、dict（哈希表）</td>
<td>小对象用 listpack，大的用 dict</td>
</tr>
<tr>
<td><strong>Set</strong></td>
<td>去重集合、社交关系</td>
<td>intset（小整数集合）、dict（哈希表）</td>
<td>小整数用 intset，否则用 dict</td>
</tr>
<tr>
<td><strong>ZSet</strong></td>
<td>排行榜、延时队列</td>
<td>listpack（小数据）、跳表+dict</td>
<td>跳表负责排序，dict 负责快速查找</td>
</tr>
</tbody></table>
<ul>
<li>压缩列表(ziplist)和listpack的数据结构</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;zlbytes&gt;&lt;zltail&gt;&lt;zllen&gt;&lt;entry1&gt;&lt;entry2&gt;...&lt;entryN&gt;&lt;zlend&gt;</span><br></pre></td></tr></table></figure>

<p>每个 entry 由三部分组成：</p>
<ol>
<li>prevlen：上一个 entry 的长度（用于双向遍历）</li>
<li>encoding：当前 entry 的编码方式（字符串 &#x2F; 整数）</li>
<li>content：真正的数据</li>
</ol>
<p>listpack 移除了 prevlen，只存储 entry 自身长度，更加紧凑，避免连锁更新。</p>
<ul>
<li>quicklist数据结构</li>
</ul>
<p>quicklist &#x3D; 双向链表 + 压缩列表</p>
<p>每个节点是一个 ziplist&#x2F;listpack，多个 ziplist&#x2F;listpack 串起来形成一个双向链表。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ziplist] &lt;-&gt; [ziplist] &lt;-&gt; [ziplist] ...</span><br></pre></td></tr></table></figure>



<h2 id="blbl"><a href="#blbl" class="headerlink" title="blbl"></a>blbl</h2><ol>
<li>实习拷打（10 分钟）</li>
<li>线上 OOM 如何排查？</li>
<li>Go 如何实现并发安全 Map？</li>
<li>Go 与 Java &#x2F; C++ 区别？</li>
<li>Go GC 机制</li>
<li>微服务与 DDD 的理解</li>
<li>MySQL 慢查询如何排查？</li>
<li>QPS 飙高，接口需要做哪些优化？</li>
<li>数据库如何扛住高并发请求？</li>
<li>如何保存缓存数据库强一致性?</li>
<li>MQ 消息堆积如何解决？</li>
<li>Kafka 消费组和分区的关系</li>
<li>如何保证消息有序？</li>
<li>Go UT 有什么原则？</li>
<li>内部单测包，怎么用，什么原理？</li>
<li>AI 辅助编程看法</li>
<li>算法题：Leetcode 143. 重排链表</li>
</ol>
<h2 id="深度智耀"><a href="#深度智耀" class="headerlink" title="深度智耀"></a>深度智耀</h2><ul>
<li>deepsearch</li>
<li>前沿大模型</li>
<li>临床全周期</li>
</ul>
<h2 id="兴业数金"><a href="#兴业数金" class="headerlink" title="兴业数金"></a>兴业数金</h2><ul>
<li><p>OracleDB的分页查询</p>
</li>
<li><p>Linux查看log命令</p>
</li>
<li><p>Mybatis防止sql注入</p>
</li>
<li><p>慢sql怎么分析？</p>
</li>
<li><p>哪些情况导致索引失效？</p>
</li>
</ul>
<ol>
<li>在索引列上进行计算 &#x2F; 函数操作</li>
<li>隐式类型转换：<code>SELECT * FROM user WHERE name = 123;</code></li>
<li>LIKE 以通配符开头: <code>SELECT * FROM user WHERE name LIKE &#39;%abc&#39;;</code></li>
<li>OR 条件混用索引列和非索引列 <code>SELECT * FROM user WHERE id = 1 OR age = 20;</code></li>
<li>范围查询阻断索引:<code>SELECT * FROM user WHERE a = 1 AND b &gt; 5 AND c = 10;</code></li>
<li>索引列使用 &lt;&gt;, !&#x3D;, NOT IN: SELECT * FROM user WHERE age !&#x3D; 18;</li>
</ol>
<ul>
<li>自动装箱&#x2F;拆箱</li>
<li>redis缓存更新</li>
</ul>
<h2 id="新婆罗昌"><a href="#新婆罗昌" class="headerlink" title="新婆罗昌"></a>新婆罗昌</h2><ul>
<li>RAG优化</li>
</ul>
<ol>
<li>文档分割，Llamaparser + Embedding模型 + 递归分割 + 正则 防止分割掉表</li>
<li>Rerank打分，作为大模型引用的权重</li>
</ol>
<ul>
<li><p>Prompt优化</p>
</li>
<li><p>限定角色和回答空间</p>
</li>
<li><p>限定从Rag中获取回答</p>
</li>
<li><p>补强多模态！！！！！！</p>
</li>
<li><p>应用部署的时候有哪些要点</p>
</li>
</ul>
<p>实时性的算法，放在本地<br>生成式的算法，放在云端</p>
<ul>
<li>部署经验<br>可以描述一个具体项目：比如使用 PyTorch 训练的 NLP 模型，部署到线上。</li>
</ul>
<p>流程：</p>
<ol>
<li><p>模型训练完成后，保存为 .pt 或 ONNX 格式。</p>
</li>
<li><p>模型转换为高性能推理格式（如 TorchScript 或 TensorRT），即从动态图转成静态图。</p>
</li>
</ol>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 模型转换成推理格式</span><br><span class="line">scripted_model = torch.jit.script(model)</span><br><span class="line">scripted_model.save(<span class="string">&quot;model_scripted.pt&quot;</span>)</span><br><span class="line">// 模型量化</span><br><span class="line"><span class="keyword">import</span> torch.quantization</span><br><span class="line">quantized_model = torch.quantization.quantize_dynamic(</span><br><span class="line">    model, &#123;torch.nn.Linear&#125;, dtype=torch.qint8</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><p>封装成微服务，例如使用 FastAPI&#x2F;Flask 提供 REST 接口。</p>
</li>
<li><p>使用 Docker 容器化部署，利用 Kubernetes 做弹性伸缩。</p>
</li>
</ol>
<ul>
<li>高并发优化：</li>
</ul>
<p>在高并发下，如果每个请求都单独送入模型，GPU&#x2F;CPU 会空转和频繁调用，效率低。合并请求能显著提高吞吐量。</p>
<p>Batch请求：收集一段时间内或一定数量的请求，然后一次性送入模型推理。</p>
<p>异步处理&#x2F;线程池：可以在数据预处理阶段使用多线程并行处理，提高吞吐量。</p>
<p>模型优化：量化（INT8）、蒸馏（小模型替代大模型）减轻计算压力。性能敏感层 → INT8 | 精度敏感层 → FP16 &#x2F; FP32。 线性层可以用INT8，embedding层和归一化层用fp</p>
<p>模型剪枝：权重矩阵中接近0的权重置为0，或者将整个通道（比如说多头注意力中权重不大的头去掉）</p>
<ul>
<li>模型选择：</li>
</ul>
<p>根据任务选择：</p>
<p>NLP：BERT&#x2F;Transformers BERT适合分类、匹配等任务，Transformer适合生成任务</p>
<p>CV：ResNet、EfficientNet</p>
<p>推荐系统：Wide &amp; Deep、LightFM</p>
<ul>
<li>训练调优技巧：</li>
</ul>
<p>学习率调度（StepLR、CosineAnnealing）</p>
<p>使用合理的初始化避免梯度爆炸，正则化（L2、Dropout）、批量归一化保证训练稳定和加速收敛</p>
<p>数据增强（CV: flip, rotation; NLP: synonym replacement）</p>
<p>Early stopping 避免过拟合</p>
<ul>
<li><p>文本清洗</p>
</li>
<li><p>如何选择优化策略？</p>
</li>
</ul>
<ol>
<li>数据量大，噪声少：用SGD，泛化能力强，更容易找到平滑的最优点</li>
<li>数据量小，特征稀疏：Adam+Warmup</li>
</ol>
<p>动态地调整学习率，先小学习率warmup在做decay减小学习率，加快收敛，同时earlystop防止过拟合</p>
<h2 id="华美海润"><a href="#华美海润" class="headerlink" title="华美海润"></a>华美海润</h2><ul>
<li>复杂表格怎么做成RAG</li>
</ul>
<p>使用LlamaParser来对PDf进行读取和解析，解析成MarkDown，切割文档时，除了要embedding切割和递归切割之外，还要用正则匹配的方式确保markdown中的表格名称不会被切割开</p>
<ul>
<li>embedding查询的召回率怎么验证的</li>
</ul>
<p>MRR和Recall@1,3,5来验证召回率:</p>
<ul>
<li>MRR就是<code>1/(1+rankIndex)</code>，针对一个问题一个答案的情况 rankIndex就是答案在检索到的内容中的排名</li>
<li>recall@1,3,5就是<code>R&amp;H/R</code>, 针对一个问题多个答案的情况，就是比如答案有5个，R&#x3D;5,H&#x3D;检索内容的数量，R&amp;H就是检索内容中正确答案的数量，然后对三个召回率求平均就是平均召回率</li>
</ul>
<p>MRR&gt;0.7, reacll&gt;0.8</p>
<h2 id="EATON"><a href="#EATON" class="headerlink" title="EATON"></a>EATON</h2><ul>
<li><p>Spring常用的注入方式</p>
</li>
<li><p>多线程避免死锁</p>
</li>
</ul>
<h2 id="Rakuten"><a href="#Rakuten" class="headerlink" title="Rakuten"></a>Rakuten</h2><ul>
<li>介绍一下HTTP</li>
</ul>
<p>无状态的基于请求-相应模式的协议，基于TCP传输协议，支持明文传输（HTTP）和加密传输（HTTPS），HTTPS 在 HTTP 之上加入了 TLS&#x2F;SSL 层，提供了数据加密和身份认证。</p>
<ul>
<li>OSI模型第四层和第七层有什么协议</li>
</ul>
<p>第四层（传输层）：提供端到端的数据传输服务，控制数据的可靠性、顺序、流量、错误恢复等，建立主机间的连接或无连接通信。常见协议有：TCP，UDP</p>
<p>第七层（应用层）：直接面向用户，为用户应用程序提供服务，定义数据格式、编码、对话控制、认证等。常见协议有：HTTP&#x2F;HTTPS，FTP&#x2F;SFTP，SMTP&#x2F;POP3&#x2F;IMAP，DNS，SSH</p>
<ul>
<li>HTTP1.0和HTTP1.1的区别</li>
</ul>
<p>HTTP&#x2F;1.0：每个请求都建立新连接 ➜ 性能差；</p>
<p>HTTP&#x2F;1.1：</p>
<p>支持长连接和复用连接；</p>
<p>增强缓存机制；</p>
<p>支持更多请求方法；</p>
<p>支持虚拟主机（Host 字段）；</p>
<p>性能比 HTTP&#x2F;1.0 提升明显。</p>
<ul>
<li>TTL（Time to Live）是什么</li>
</ul>
<p>TTL 的全称是 Time To Live，直译为“生存时间”或“存活时间”，在不同的技术场景中含义略有不同，但核心都是 “一个数据存在多久” 的概念。</p>
<ol>
<li>网络传输中的 TTL（IP 数据包）</li>
</ol>
<p>含义：一个 IP 数据包能经过多少个路由器（跳数）；</p>
<p>作用：防止数据包在网络中无限循环。</p>
<p>实现方式：</p>
<p>初始由发送端设置（如 64）；</p>
<p>每经过一个路由器，TTL 减 1；</p>
<p>TTL 减到 0 就会被丢弃。</p>
<ul>
<li>TLS是什么</li>
</ul>
<p>TLS 的全称是 Transport Layer Security（传输层安全协议），是一种用来保障网络通信安全的协议，是现在互联网上最常用的安全通信基础，尤其是 HTTPS 的核心组成部分。</p>
<table>
<thead>
<tr>
<th>能力</th>
<th>解释</th>
</tr>
</thead>
<tbody><tr>
<td><strong>加密</strong></td>
<td>数据传输过程是加密的，别人截取也看不懂。</td>
</tr>
<tr>
<td><strong>认证</strong></td>
<td>确保对方身份真实（服务器有合法证书）。</td>
</tr>
<tr>
<td><strong>完整性校验</strong></td>
<td>保证数据没被篡改，有校验机制检测中途篡改的内容。</td>
</tr>
</tbody></table>
<p><strong>举个例子：访问 <a target="_blank" rel="noopener" href="https://example.com/">https://example.com</a></strong></p>
<p>浏览器请求服务器；</p>
<p>服务器返回 TLS 证书（通常由权威 CA 签发）；</p>
<p>浏览器验证证书合法性（未过期、域名匹配、信任链）；</p>
<p>双方通过 密钥协商（握手），生成对称加密密钥；</p>
<p>之后通信内容就通过这个密钥加密传输了，别人看不到内容。</p>
<p><strong>TLS 用在哪里？</strong></p>
<p>HTTPS（加密的 HTTP，TLS 是其安全核心）；</p>
<p>邮件服务（如 SMTP over TLS）；</p>
<p>数据库连接（如 MySQL TLS）；</p>
<p>API 调用、安全传输协议（如 gRPC、MQTT）；</p>
<p>VPN 加密通道等。</p>
<p><strong>TLS 的组成模块（简要）：</strong></p>
<p>对称加密：AES、ChaCha20 等，加密通信内容；</p>
<p>非对称加密：RSA、ECDSA，用于身份认证与密钥交换；</p>
<p>哈希函数：SHA256、SHA384，确保消息完整性；</p>
<p>数字证书：由 CA 机构颁发，用于身份验证。</p>
<ul>
<li>TCP UDP区别</li>
</ul>
<table>
<thead>
<tr>
<th>对比项</th>
<th>TCP</th>
<th>UDP</th>
</tr>
</thead>
<tbody><tr>
<td><strong>是否连接</strong></td>
<td>面向连接（三次握手）</td>
<td>无连接</td>
</tr>
<tr>
<td><strong>是否可靠</strong></td>
<td>可靠（有确认应答、重传机制）</td>
<td>不可靠（丢了就丢了）</td>
</tr>
<tr>
<td><strong>数据传输顺序</strong></td>
<td>有序传输（数据按顺序到达）</td>
<td>无序（可能乱序到达）</td>
</tr>
<tr>
<td><strong>流量控制</strong></td>
<td>有（根据接收端能力调整发送速度）</td>
<td>无</td>
</tr>
<tr>
<td><strong>拥塞控制</strong></td>
<td>有（如慢开始、拥塞避免）</td>
<td>无</td>
</tr>
<tr>
<td><strong>传输效率</strong></td>
<td>慢一些，但更安全可靠</td>
<td>快，适用于实时性高的场景</td>
</tr>
<tr>
<td><strong>适用场景</strong></td>
<td>对可靠性要求高的应用（如文件传输）</td>
<td>对实时性要求高的应用（如视频、语音）</td>
</tr>
<tr>
<td><strong>首部开销</strong></td>
<td>大（20字节）</td>
<td>小（8字节）</td>
</tr>
</tbody></table>
<ul>
<li>Redis你在项目里是怎么用的</li>
</ul>
<p>缓存热点数据：由于我们项目获取用户的信息需要从另一个服务中调取，同时每个用户的部门之间存在的上下级关系，导致获取一个用户的权限的approver需要较复杂的连表和filter操作。我们将用户id对应的能够审核其请求的用户id记录在redis中。</p>
<p>Session &#x2F; Token 缓存</p>
<p>使用场景：用户登录态管理、OAuth token 存储。<br>实现方式：存储用户信息并设置过期时间，或使用 JWT 搭配 Redis 存储黑名单。</p>
<ul>
<li>Redis复制方式</li>
</ul>
<ol>
<li>启动复制（初次同步）<br>当你配置一个从节点连接主节点（使用 replicaof 命令或配置项）时，发生如下步骤：</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1. 从节点发送 PSYNC 命令给主节点；</span><br><span class="line">2. 主节点执行 bgsave 创建 RDB 快照；</span><br><span class="line">3. 主节点将快照发送给从节点；</span><br><span class="line">4. 主节点在生成快照期间的写命令会缓存在内存中；</span><br><span class="line">5. 从节点加载快照后，主节点发送缓存的写命令；</span><br><span class="line">6. 主从节点保持连接，主节点继续将新的写命令发送给从节点。</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>增量复制</li>
</ol>
<p>如果主从连接断开后重连，Redis 尝试使用 PSYNC 协议进行增量复制：<br>Redis 会通过 复制偏移量 与 复制积压缓冲区 来判断是否能从断点继续同步。如果可以，则只同步丢失的数据（高效）。如果偏移量太旧，就回退到全量复制。</p>
<ul>
<li>为什么想加入我们公司<br>I am very interested in joining Rakuten Institute of Technology because of its strong focus on technological innovation and its influence as part of a global internet company. I was impressed by the company’s emphasis on R&amp;D in areas like AI, data science, and scalable systems, which aligns well with both my academic background and professional experience.</li>
</ul>
<p>I previously worked at Citi, where I participated in the development of enterprise-level risk control systems using Java, Spring Boot, Kafka, and Redis, and I’m confident that these experiences will allow me to contribute effectively in your development team.</p>
<p>Additionally, I appreciate the opportunity to work in an international and collaborative environment like Rakuten’s, which would allow me to grow both technically and culturally. I look forward to being part of a company that values innovation, performance, and continuous improvement.</p>
<p>我希望加入乐天创研（上海），一方面是因为贵公司作为全球领先互联网企业的技术研发部门，非常注重前沿技术的探索与创新，尤其在人工智能、数据技术和大规模系统架构方面的投入让我非常钦佩，也和我未来的发展方向高度一致。</p>
<p>此前我在花旗参与了多个企业级系统的开发工作，熟悉 Java、Spring Boot、Kafka、Redis 等后端技术栈，积累了扎实的微服务开发与系统集成经验，我相信这些都可以为贵公司的研发工作带来价值。</p>
<p>此外，乐天倡导开放、协作的国际化研发氛围，对于我来说不仅能技术成长，也能增强跨文化的沟通与协作能力。我期待在这样一个注重创新与实践的平台中不断提升自己，也为公司创造更多价值。</p>
<ul>
<li>现在的项目用的是Java几？有使用相关的特性吗？</li>
</ul>
<p>String类型的变量可以调用新的方法</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>isBlank()</code></td>
<td>判断是否是空白（包含空字符串和只含空格）</td>
</tr>
<tr>
<td><code>lines()</code></td>
<td>按行拆分字符串，返回 Stream</td>
</tr>
<tr>
<td><code>strip() / stripLeading() / stripTrailing()</code></td>
<td>替代 <code>trim()</code>，支持 Unicode</td>
</tr>
<tr>
<td><code>repeat(int count)</code></td>
<td>将字符串重复指定次数</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&quot; hello &quot;.strip();        // &quot;hello&quot;</span><br><span class="line">&quot;abc\nxyz&quot;.lines().count();  // 2</span><br></pre></td></tr></table></figure>

<ul>
<li>Stream用过吗?有哪些特性?怎么用的?</li>
</ul>
<p>主要特性</p>
<table>
<thead>
<tr>
<th>特性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><strong>声明式编程</strong></td>
<td>通过链式调用表达业务逻辑，避免显式循环</td>
</tr>
<tr>
<td><strong>惰性求值</strong></td>
<td>中间操作不会立即执行，只有遇到终止操作才会触发执行</td>
</tr>
<tr>
<td><strong>链式调用</strong></td>
<td>多个操作可以组合在一起</td>
</tr>
<tr>
<td><strong>非存储性</strong></td>
<td>不会存储数据，只是对数据的“视图”</td>
</tr>
<tr>
<td><strong>可并行性</strong></td>
<td>支持并行流 <code>parallelStream()</code>，提高处理性能（适用于大数据量）</td>
</tr>
</tbody></table>
<p>常用操作</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>filter(Predicate)</code></td>
<td>过滤元素</td>
</tr>
<tr>
<td><code>map(Function)</code></td>
<td>映射每个元素</td>
</tr>
<tr>
<td><code>distinct()</code></td>
<td>去重</td>
</tr>
<tr>
<td><code>sorted()</code> &#x2F; <code>sorted(Comparator)</code></td>
<td>排序</td>
</tr>
<tr>
<td><code>limit(n)</code> &#x2F; <code>skip(n)</code></td>
<td>截断 &#x2F; 跳过</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>filter(Predicate)</code></td>
<td>过滤元素</td>
</tr>
<tr>
<td><code>map(Function)</code></td>
<td>映射每个元素</td>
</tr>
<tr>
<td><code>distinct()</code></td>
<td>去重</td>
</tr>
<tr>
<td><code>sorted()</code> &#x2F; <code>sorted(Comparator)</code></td>
<td>排序</td>
</tr>
<tr>
<td><code>limit(n)</code> &#x2F; <code>skip(n)</code></td>
<td>截断 &#x2F; 跳过</td>
</tr>
</tbody></table>
<ul>
<li>Spring有哪些特性？（解释IOC和AOP）</li>
</ul>
<table>
<thead>
<tr>
<th>特性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><strong>IOC（控制反转）</strong></td>
<td>由 Spring 容器管理对象的创建与依赖注入</td>
</tr>
<tr>
<td><strong>AOP（面向切面编程）</strong></td>
<td>允许将通用功能（如日志、安全、事务）从业务逻辑中分离出来</td>
</tr>
<tr>
<td><strong>声明式事务管理</strong></td>
<td>通过注解或 XML 统一管理事务逻辑</td>
</tr>
</tbody></table>
<p>IoC 是一种思想，指的是 将对象的创建与依赖关系的管理权从代码本身“反转”给框架（如 Spring 容器）来处理。</p>
<p>IoC 的优点</p>
<p>降低耦合：类之间无需关心彼此如何构造；</p>
<p>提升可测试性：方便 mock 替换；</p>
<p>增强可维护性：依赖关系集中管理；</p>
<p>灵活配置：通过配置文件或注解动态改变注入行为。</p>
<table>
<thead>
<tr>
<th>方式</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td>构造方法注入</td>
<td>通过构造器传入依赖</td>
<td><code>@Autowired public A(B b)</code></td>
</tr>
<tr>
<td>Setter 方法注入</td>
<td>通过 setter 方法注入</td>
<td><code>@Autowired public void setB(B b)</code></td>
</tr>
<tr>
<td>属性注入</td>
<td>直接在字段上注入依赖</td>
<td><code>@Autowired private B b;</code></td>
</tr>
</tbody></table>
<p>AOP 通过在不修改原有代码的基础上，在方法调用的“前后”动态插入额外逻辑（称为“切面”）。</p>
<p>Spring 的 AOP 基于：</p>
<p>JDK 动态代理（如果目标类实现了接口）</p>
<p>CGLIB 字节码生成技术（如果目标类没有接口）</p>
<table>
<thead>
<tr>
<th>概念</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><strong>切面（Aspect）</strong></td>
<td>通用功能模块，如日志切面</td>
</tr>
<tr>
<td><strong>连接点（Join Point）</strong></td>
<td>程序执行的某个点，如方法调用</td>
</tr>
<tr>
<td><strong>通知（Advice）</strong></td>
<td>在连接点执行的操作，如前置&#x2F;后置通知</td>
</tr>
<tr>
<td><strong>切入点（Pointcut）</strong></td>
<td>匹配连接点的表达式</td>
</tr>
<tr>
<td><strong>织入（Weaving）</strong></td>
<td>将切面逻辑织入主业务逻辑的过程</td>
</tr>
</tbody></table>
<p>AOP 的优点</p>
<p>关注点分离：业务逻辑中不再有杂质代码；</p>
<p>可插拔性：只要配置切面，就能影响任意模块；</p>
<p>解耦：日志、事务、权限都可以用统一模块处理；</p>
<p>可扩展性强：面向接口编程 + 动态增强。</p>
<ul>
<li>Spring和SpringBoot的区别？</li>
</ul>
<table>
<thead>
<tr>
<th>框架</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Spring</strong></td>
<td>一个功能强大的轻量级开发框架，提供了 IOC、AOP、事务、MVC 等核心模块，是整个 Spring 家族的基础。</td>
</tr>
<tr>
<td><strong>Spring Boot</strong></td>
<td>基于 Spring 的快速开发框架，<strong>简化配置、自动装配</strong>，让你更快、更轻松地构建 Spring 应用，<strong>是 Spring 的增强封装</strong>。</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>对比项</th>
<th>Spring</th>
<th>Spring Boot</th>
</tr>
</thead>
<tbody><tr>
<td><strong>定位</strong></td>
<td>一个基础开发框架</td>
<td>一个快速构建 Spring 应用的脚手架</td>
</tr>
<tr>
<td><strong>配置方式</strong></td>
<td>XML + 注解配置繁琐</td>
<td>基于注解 + 自动配置，开箱即用</td>
</tr>
<tr>
<td><strong>依赖管理</strong></td>
<td>手动添加每个 starter</td>
<td>提供大量 <code>spring-boot-starter-*</code> 简化依赖管理</td>
</tr>
<tr>
<td><strong>项目结构</strong></td>
<td>需要手动搭建目录结构</td>
<td>自动生成目录结构（Spring Initializr）</td>
</tr>
<tr>
<td><strong>Web容器启动</strong></td>
<td>需要部署到外部 Tomcat 等容器</td>
<td>内嵌 Tomcat&#x2F;Jetty，应用可直接运行（<code>main</code> 方法）</td>
</tr>
<tr>
<td><strong>日志配置</strong></td>
<td>需要手动配置 log4j&#x2F;slf4j 等</td>
<td>默认集成 Logback，自动配置</td>
</tr>
<tr>
<td><strong>难易程度</strong></td>
<td>学习曲线更陡</td>
<td>更适合中小项目，入门简单</td>
</tr>
</tbody></table>
<ul>
<li>SpringBoot有哪些特性？</li>
</ul>
<table>
<thead>
<tr>
<th>特性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><strong>自动配置（Auto Configuration）</strong></td>
<td>根据引入的依赖自动配置 Spring Bean，无需繁琐 XML 或注解配置</td>
</tr>
<tr>
<td><strong>内嵌 Web 服务器</strong></td>
<td>默认内置 Tomcat、Jetty、Undertow，无需外部部署容器，可直接运行</td>
</tr>
<tr>
<td><strong>简化配置</strong></td>
<td>使用 <code>application.properties</code> 或 <code>application.yml</code> 文件统一管理配置</td>
</tr>
<tr>
<td><strong>快速启动</strong></td>
<td>提供 <code>SpringApplication.run()</code> 入口类，一键启动整个服务</td>
</tr>
<tr>
<td><strong>Starter 模块</strong></td>
<td>提供大量 <code>spring-boot-starter-*</code> 模块，自动引入相关依赖</td>
</tr>
<tr>
<td><strong>健康检查与监控</strong>（Actuator）</td>
<td>提供系统运行状态、健康指标、Bean 信息、环境变量等监控接口</td>
</tr>
<tr>
<td><strong>统一日志系统</strong></td>
<td>默认使用 Logback，集成 SLF4J，简化日志配置</td>
</tr>
<tr>
<td><strong>热部署支持</strong>（DevTools）</td>
<td>自动重启项目，提升开发效率</td>
</tr>
<tr>
<td><strong>Profile 支持</strong></td>
<td>多环境配置（如 <code>application-dev.yml</code>、<code>application-prod.yml</code>）自动切换</td>
</tr>
<tr>
<td><strong>Spring 全家桶无缝集成</strong></td>
<td>与 Spring Security、Spring Data、Spring Cloud 等天然集成</td>
</tr>
</tbody></table>
<ul>
<li>SpringBoot的Starter是如何实现的？</li>
</ul>
<p>本质上就是把一堆依赖聚合在一起，保证版本的兼容；也可以设置自动装配类，实现导入即可用</p>
<table>
<thead>
<tr>
<th>部分</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Starter 模块</strong></td>
<td>提供功能相关的依赖集合（比如 Redis、Kafka、JPA 的依赖）</td>
</tr>
<tr>
<td><strong>Auto Configuration 模块</strong></td>
<td>提供自动配置类，定义如何根据条件注册 Bean 到 Spring 容器中</td>
</tr>
</tbody></table>
<ul>
<li>事务怎么实现的?</li>
</ul>
<p>@transactional 或者 transactionTemplate</p>
<p>@transactional 失效情况：</p>
<ol>
<li>同一个类中的方法调用@Transactional的方式时</li>
<li>exception被catch而未被抛出</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ComplexService</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> TransactionTemplate transactionTemplate;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">executeComplexLogic</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        transactionTemplate.execute(<span class="keyword">new</span> TransactionCallback&lt;Void&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> Void <span class="title">doInTransaction</span><span class="params">(TransactionStatus status)</span> </span>&#123;</span><br><span class="line">                <span class="comment">// 这里是你的业务逻辑</span></span><br><span class="line">                <span class="comment">// 如果需要回滚，可以调用 status.setRollbackOnly();</span></span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>SpringCloud有了解过吗？</li>
</ul>
<p>Spring Cloud 是一套用于快速构建分布式系统的开发框架，它基于 Spring Boot，整合了各种微服务基础设施组件，提供了 配置管理、服务注册与发现、负载均衡、断路器、链路追踪、网关 等功能，简化了微服务架构下的开发复杂度。</p>
<ul>
<li><p>项目的数据量是多少？</p>
</li>
<li><p>项目是怎么监控的？</p>
</li>
</ul>
<p>日志用Kibana，api的call和响应过程用AppDynamic，资源的监控用k8s</p>
<p>我们项目部署在 Kubernetes 集群中，整体采用了多套工具组合实现应用性能监控、系统资源监控和日志采集分析。</p>
<p>应用性能监控（APM）：<br>使用 AppDynamics 对服务进行链路追踪和性能分析，主要监控 API 的响应时间、吞吐量、错误率等关键指标。一旦某个接口响应变慢或报错增加，我们能迅速定位到具体的服务方法甚至数据库调用。</p>
<p>日志监控：<br>日志方面采用了 ELK（Elasticsearch + Logstash + Kibana） 方案，其中：</p>
<p>使用 Logstash&#x2F;Fluentd 采集服务容器日志；</p>
<p>日志集中存储到 Elasticsearch；</p>
<p>通过 Kibana 实现可视化分析与查询，比如快速查找错误堆栈、跟踪特定用户请求。</p>
<p>资源与指标监控：<br>使用 Prometheus + Grafana 对 Kubernetes 节点和服务的资源使用情况（如 CPU、内存、网络流量）进行实时采集和可视化展示，部分服务还埋点了业务指标，比如订单成功率、队列堆积等。</p>
<p>告警系统：<br>所有监控系统都接入了 Alertmanager 或企业通知系统（如邮件、钉钉、PagerDuty），当触发预设阈值时能第一时间通知相关开发或运维人员处理。<br>SpringBatch主要有哪些组件？</p>
<ul>
<li>数据库如何调优的？</li>
</ul>
<p><strong>SQL 语句优化：</strong></p>
<p>避免全表扫描：通过分析慢查询日志，使用合适的索引优化 WHERE、JOIN、ORDER BY 等条件。</p>
<p>控制返回列数量：尽量避免 SELECT *，只取实际需要的字段。</p>
<p>分批处理大数据量查询：使用分页或游标，避免一次性拉取大量数据导致内存飙升。</p>
<p>避免 N+1 查询问题：在 ORM 框架中，合理使用 JOIN 或批量查询。</p>
<p><strong>数据库连接池优化：</strong></p>
<p>使用连接池工具（如 HikariCP、Druid），并根据实际并发量设置合理的：</p>
<p>最大连接数（maxPoolSize）</p>
<p>最小空闲连接数</p>
<p>最大等待时间等</p>
<p>避免连接泄露，确保每次使用后能及时关闭或归还连接。</p>
<p>redis接触过吗,怎么用的？</p>
<p>Docker用过吗?</p>
<h2 id="OOCL"><a href="#OOCL" class="headerlink" title="OOCL"></a>OOCL</h2><p><a target="_blank" rel="noopener" href="https://docs.qq.com/doc/DY3pwd0RFR0NsY01x">https://docs.qq.com/doc/DY3pwd0RFR0NsY01x</a></p>
<ul>
<li>SpringMVC 工作原理</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">浏览器</span><br><span class="line">   ↓</span><br><span class="line">DispatcherServlet</span><br><span class="line">   ↓</span><br><span class="line">HandlerMapping (找 Controller)</span><br><span class="line">   ↓</span><br><span class="line">HandlerAdapter (执行 Controller)</span><br><span class="line">   ↓</span><br><span class="line">Controller (处理业务)</span><br><span class="line">   ↓</span><br><span class="line">ViewResolver (找视图)</span><br><span class="line">   ↓</span><br><span class="line">View (渲染)</span><br><span class="line">   ↓</span><br><span class="line">浏览器</span><br></pre></td></tr></table></figure>

<ul>
<li>什么是Servlet</li>
</ul>
<p>Servlet 就是 Java 写的、运行在服务器上的一个小程序，用来接收、处理 HTTP 请求，然后生成 HTTP 响应。</p>
<p>早期 Java Web 没有 Spring MVC 的时候，Servlet 就是核心：</p>
<ol>
<li>浏览器访问 <a target="_blank" rel="noopener" href="http://xxx.com/hello">http://xxx.com/hello</a></li>
<li>服务器 Tomcat 收到请求</li>
<li>找到你写的 HelloServlet</li>
<li>执行 doGet() 或 doPost() 方法</li>
<li>把结果写到 HttpServletResponse 里，返回给浏览器</li>
</ol>
<ul>
<li>hashmap 寻位过程</li>
</ul>
<p>默认16个哈希桶，每个桶对应一个链表，当链表超过8时并且数组长度大于64，变成红黑树；否则简单扩容哈希桶个数，并且按照原hash值重新计算应该放到哪个hash桶</p>
<ul>
<li>jdbc原理</li>
</ul>
<p>JDBC 原理 &#x3D; 统一接口 + 驱动厂商实现 + TCP 传输 + 结果封装</p>
<ul>
<li>三次握手四次挥手</li>
</ul>
<table>
<thead>
<tr>
<th>问题</th>
<th>答案</th>
</tr>
</thead>
<tbody><tr>
<td><strong>为什么要三次握手？</strong></td>
<td>为了可靠建立连接，双向确认双方都可收发，避免旧连接干扰</td>
</tr>
<tr>
<td><strong>为什么要 TIME_WAIT？</strong></td>
<td>保证最后一个 ACK 能到达对方，防止旧连接的数据影响新连接，确保连接优雅关闭</td>
</tr>
<tr>
<td><strong>为什么是 2 倍最大生存时间？</strong></td>
<td>彻底清除网络中的残留包</td>
</tr>
</tbody></table>
<ul>
<li>线程池的种类</li>
</ul>
<table>
<thead>
<tr>
<th>工厂方法</th>
<th>线程池类型</th>
<th>特点</th>
<th>适用场景</th>
</tr>
</thead>
<tbody><tr>
<td><code>Executors.newFixedThreadPool(int n)</code></td>
<td><strong>固定大小线程池</strong></td>
<td>有固定数量的核心线程，超出的任务会排队</td>
<td>执行长期任务、负载较均匀</td>
</tr>
<tr>
<td><code>Executors.newSingleThreadExecutor()</code></td>
<td><strong>单线程池</strong></td>
<td>始终只有一个线程，任务顺序执行</td>
<td>保证顺序执行（如日志写入）</td>
</tr>
<tr>
<td><code>Executors.newCachedThreadPool()</code></td>
<td><strong>可缓存线程池</strong></td>
<td>没有核心线程，空闲线程会被回收，可无限增长</td>
<td>大量短期异步小任务</td>
</tr>
<tr>
<td><code>Executors.newScheduledThreadPool(int n)</code></td>
<td><strong>定时&#x2F;周期线程池</strong></td>
<td>核心线程数固定，可执行延迟&#x2F;周期任务</td>
<td>定时任务</td>
</tr>
<tr>
<td><code>Executors.newWorkStealingPool(int n)</code></td>
<td><strong>工作窃取线程池</strong>（Java 8+）</td>
<td>使用 ForkJoinPool 实现，自动调度</td>
<td>并行流或递归拆分</td>
</tr>
</tbody></table>
<ul>
<li>数据库表的设计选择</li>
</ul>
<table>
<thead>
<tr>
<th>需求</th>
<th>推荐做法</th>
</tr>
</thead>
<tbody><tr>
<td>主键</td>
<td>自增ID or 分布式ID</td>
</tr>
<tr>
<td>软删除</td>
<td>加 <code>is_deleted</code> 标记</td>
</tr>
<tr>
<td>乐观锁</td>
<td>加 <code>version</code> 字段</td>
</tr>
<tr>
<td>审计</td>
<td>加 <code>created_at</code>、<code>updated_at</code></td>
</tr>
<tr>
<td>唯一约束</td>
<td>使用 <code>unique index</code></td>
</tr>
<tr>
<td>复杂状态</td>
<td>状态机用 <code>enum</code> 或 <code>tinyint</code></td>
</tr>
</tbody></table>
<ul>
<li>三范式</li>
</ul>
<table>
<thead>
<tr>
<th>范式</th>
<th>定义</th>
<th>通俗解释</th>
</tr>
</thead>
<tbody><tr>
<td>1NF</td>
<td>每个字段只能有单一值</td>
<td>表中不能出现“数组”或“多值列”</td>
</tr>
<tr>
<td>2NF</td>
<td>满足1NF，且非主属性完全依赖主键</td>
<td>表里非主键字段必须完全依赖于主键，而不是部分依赖</td>
</tr>
<tr>
<td>3NF</td>
<td>满足2NF，且非主属性不传递依赖主键</td>
<td>表里非主键字段不能依赖于其他非主键字段</td>
</tr>
</tbody></table>
<ul>
<li>UML是什么</li>
</ul>
<p>UML（Unified Modeling Language） 是一种面向对象的软件建模标准语言，它就是用「图」来画出程序结构、模块关系、类之间的依赖、流程、交互等，方便团队理解和沟通。<br><img src="https://i.imgur.com/s9EQLmR.png" alt="picture 0"></p>
<ul>
<li>脑筋急转弯：屋子里能放多少网球</li>
</ul>
<p>测量房间长宽高，将球体看成边长为直径的正方体，房间体积&#x2F;正方体体积</p>
<ul>
<li>设计模式是什么</li>
</ul>
<p>是一些在软件开发中反复出现、被验证可行的经典解决方案，<br>它不是具体代码，而是一种可复用的、最佳实践式的思路和模板。</p>
<ul>
<li>native是什么</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NativeExample</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 声明一个 native 方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">native</span> <span class="keyword">void</span> <span class="title">sayHello</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="comment">// 加载实现这个 native 方法的动态库</span></span><br><span class="line">        System.loadLibrary(<span class="string">&quot;NativeLib&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> NativeExample().sayHello();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Java rest 调用</li>
</ul>
<p>先写一个config类@Configuration, 然后注入的方式进行</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// restTemplate</span></span><br><span class="line"><span class="comment">// 简单易用</span></span><br><span class="line"><span class="comment">// 适合简单场景</span></span><br><span class="line"><span class="comment">// Spring 5 后官方推荐用 WebClient 代替</span></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.client.RestTemplate;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RestClientExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        RestTemplate restTemplate = <span class="keyword">new</span> RestTemplate();</span><br><span class="line"></span><br><span class="line">        String url = <span class="string">&quot;https://jsonplaceholder.typicode.com/posts/1&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// GET 请求</span></span><br><span class="line">        String result = restTemplate.getForObject(url, String.class);</span><br><span class="line"></span><br><span class="line">        System.out.println(result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// webclient</span></span><br><span class="line"><span class="comment">// 推荐用于新项目</span></span><br><span class="line"><span class="comment">// 支持响应式流式处理</span></span><br><span class="line"><span class="comment">// 配置更灵活</span></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.reactive.function.client.WebClient;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebClientExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        WebClient webClient = WebClient.create();</span><br><span class="line"></span><br><span class="line">        String result = webClient.get()</span><br><span class="line">                .uri(<span class="string">&quot;https://jsonplaceholder.typicode.com/posts/1&quot;</span>)</span><br><span class="line">                .retrieve()</span><br><span class="line">                .bodyToMono(String.class)</span><br><span class="line">                .block(); <span class="comment">// 阻塞获取</span></span><br><span class="line"></span><br><span class="line">        System.out.println(result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>@xxxExchange使用</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义接口</span></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.service.annotation.HttpExchange;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.service.annotation.PostExchange;</span><br><span class="line"></span><br><span class="line"><span class="meta">@HttpExchange</span> <span class="comment">// 声明这是一个 HTTP 客户端接口</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MyApiClient</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostExchange(&quot;/api/create&quot;)</span></span><br><span class="line">    <span class="function">String <span class="title">createSomething</span><span class="params">(MyRequest request)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 配置config</span></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.service.invoker.HttpServiceProxyFactory;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ApiClientConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MyApiClient <span class="title">myApiClient</span><span class="params">(RestClientBuilder builder)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 1. 创建 RestClient</span></span><br><span class="line">        <span class="keyword">var</span> restClient = builder.baseUrl(<span class="string">&quot;http://localhost:8080&quot;</span>).build();</span><br><span class="line">        <span class="comment">// 2. 用 HttpServiceProxyFactory 生成接口代理</span></span><br><span class="line">        <span class="keyword">return</span> HttpServiceProxyFactory.builderFor(RestClientAdapter.create(restClient))</span><br><span class="line">                .build()</span><br><span class="line">                .createClient(MyApiClient.class);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>prebuff 两个协议之间的区别</li>
</ul>
<p>描述 Redis 的 客户端通信协议行为 的一种概念。<br>在 Redis 和客户端交互时，协议主要分两种：</p>
<p>RESP2：旧版 Redis 协议（大多数 Redis &lt;&#x3D; 6.x 默认用它）</p>
<p>RESP3：新版协议，从 Redis 6 开始支持，Redis 7 开始逐步推广。</p>
<ul>
<li>策略模式</li>
</ul>
<p>定义一个策略接口，用多种不同的策略实现这个接口，当使用到的时候，由调用时的上下文决定这个具体的策略类用哪一个实现</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 定义策略接口</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">DiscountStrategy</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">applyDiscount</span><span class="params">(<span class="keyword">double</span> price)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 具体策略</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NoDiscount</span> <span class="keyword">implements</span> <span class="title">DiscountStrategy</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">applyDiscount</span><span class="params">(<span class="keyword">double</span> price)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> price;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PercentageDiscount</span> <span class="keyword">implements</span> <span class="title">DiscountStrategy</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">applyDiscount</span><span class="params">(<span class="keyword">double</span> price)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> price * <span class="number">0.9</span>; <span class="comment">// 9折</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 上下文</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ShoppingCart</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> DiscountStrategy discountStrategy;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ShoppingCart</span><span class="params">(DiscountStrategy discountStrategy)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.discountStrategy = discountStrategy;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">checkout</span><span class="params">(<span class="keyword">double</span> price)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> discountStrategy.applyDiscount(price);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. 使用</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ShoppingCart cart1 = <span class="keyword">new</span> ShoppingCart(<span class="keyword">new</span> NoDiscount());</span><br><span class="line">        ShoppingCart cart2 = <span class="keyword">new</span> ShoppingCart(<span class="keyword">new</span> PercentageDiscount());</span><br><span class="line"></span><br><span class="line">        System.out.println(cart1.checkout(<span class="number">100</span>)); <span class="comment">// 100</span></span><br><span class="line">        System.out.println(cart2.checkout(<span class="number">100</span>)); <span class="comment">// 90</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>工厂模式</li>
</ul>
<p>简单工厂： 一个工厂负责全部的产品的生成，当有新的产品的时候需要更改现有的工厂类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 产品接口</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Drink</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">make</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 具体产品</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Coffee</span> <span class="keyword">implements</span> <span class="title">Drink</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">make</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Make Coffee&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tea</span> <span class="keyword">implements</span> <span class="title">Drink</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">make</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Make Tea&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 工厂类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DrinkFactory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Drink <span class="title">createDrink</span><span class="params">(String type)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;coffee&quot;</span>.equalsIgnoreCase(type)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Coffee();</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;tea&quot;</span>.equalsIgnoreCase(type)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Tea();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">&quot;Unknown drink type&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. 使用</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Drink coffee = DrinkFactory.createDrink(<span class="string">&quot;coffee&quot;</span>);</span><br><span class="line">        coffee.make(); <span class="comment">// Make Coffee</span></span><br><span class="line"></span><br><span class="line">        Drink tea = DrinkFactory.createDrink(<span class="string">&quot;tea&quot;</span>);</span><br><span class="line">        tea.make(); <span class="comment">// Make Tea</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>工厂方法：定义一个工厂接口，由具体的工厂子类决定生成哪个产品，新增产品时不会干涉现有代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 产品接口</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Product</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProductA</span> <span class="keyword">implements</span> <span class="title">Product</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Product A&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProductB</span> <span class="keyword">implements</span> <span class="title">Product</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Product B&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 工厂接口</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Factory</span> </span>&#123;</span><br><span class="line">    <span class="function">Product <span class="title">createProduct</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 具体工厂A</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FactoryA</span> <span class="keyword">implements</span> <span class="title">Factory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Product <span class="title">createProduct</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ProductA();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 具体工厂B</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FactoryB</span> <span class="keyword">implements</span> <span class="title">Factory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Product <span class="title">createProduct</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ProductB();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 客户端</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FactoryMethodDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Factory factory = <span class="keyword">new</span> FactoryA();</span><br><span class="line">        Product product = factory.createProduct();</span><br><span class="line">        product.show(); <span class="comment">// Product A</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>抽象工厂</p>
<p>提供一个创建一族相关对象的接口，而无需指定具体类。适用于 多产品族</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 产品A接口</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">ProductA</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">showA</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 产品B接口</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">ProductB</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">showB</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 产品A1</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProductA1</span> <span class="keyword">implements</span> <span class="title">ProductA</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showA</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Product A1&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 产品A2</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProductA2</span> <span class="keyword">implements</span> <span class="title">ProductA</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showA</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Product A2&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 产品B1</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProductB1</span> <span class="keyword">implements</span> <span class="title">ProductB</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showB</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Product B1&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 产品B2</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProductB2</span> <span class="keyword">implements</span> <span class="title">ProductB</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showB</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Product B2&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 抽象工厂</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">AbstractFactory</span> </span>&#123;</span><br><span class="line">    <span class="function">ProductA <span class="title">createProductA</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function">ProductB <span class="title">createProductB</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 具体工厂1</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteFactory1</span> <span class="keyword">implements</span> <span class="title">AbstractFactory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ProductA <span class="title">createProductA</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ProductA1();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ProductB <span class="title">createProductB</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ProductB1();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 具体工厂2</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteFactory2</span> <span class="keyword">implements</span> <span class="title">AbstractFactory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ProductA <span class="title">createProductA</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ProductA2();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ProductB <span class="title">createProductB</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ProductB2();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 客户端</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractFactoryDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        AbstractFactory factory = <span class="keyword">new</span> ConcreteFactory1();</span><br><span class="line">        ProductA a = factory.createProductA();</span><br><span class="line">        ProductB b = factory.createProductB();</span><br><span class="line">        a.showA(); <span class="comment">// Product A1</span></span><br><span class="line">        b.showB(); <span class="comment">// Product B1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>处理内存泄漏的经验</li>
</ul>

    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2025/06/07/%E9%9D%A2%E8%AF%95%E5%A4%8D%E4%B9%A0/" rel="prev" title="面试复习-2025">
                  <i class="fa fa-chevron-left"></i> 面试复习-2025
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2025/09/11/%E9%A1%B9%E7%9B%AE%E6%B7%B1%E6%8C%96/" rel="next" title="项目深挖">
                  项目深挖 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    
  <div class="comments" id="disqus_thread">
    <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
  </div>
  
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Weirdo</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>




  <script src="/js/third-party/pace.js"></script>

  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js","integrity":"sha256-r+3itOMtGGjap0x+10hu6jW/gZCzxHsoKrOd7gyRSGY="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


<script class="next-config" data-name="disqus" type="application/json">{"enable":true,"shortname":"weirdoblog","count":true,"i18n":{"disqus":"disqus"}}</script>
<script src="/js/third-party/comments/disqus.js"></script>

</body>
</html>
